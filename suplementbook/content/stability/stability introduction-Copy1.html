

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Model stability, some background &#8212; Some additional draft (very) material on The World Bank&#39;s MFMod Framework in Python with Modelflow</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/stability/stability introduction-Copy1';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
    <p class="title logo__title">Some additional draft (very) material on The World Bank's MFMod Framework in Python with Modelflow</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction.html">
                    Foreword
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="stability%20introduction.html">1. Model stability, some background</a></li>
<li class="toctree-l1"><a class="reference internal" href="EigenValues.html">2. Model eigenvalues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onboard%20Excel/Onboard%20excel.html">3. Transform an Excel workbook to a Modelflow model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/docker.html">4. Modelflow in docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/Jupyter%20book%20tests%20and%20tips.html">5. Some jupyter book examples and tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">6. Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Reference.html">7. Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/IbHansen/modelflow-manual/blob/main/papers/suplementbook/content/stability/stability introduction-Copy1.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/IbHansen/modelflow-manual" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/stability/stability introduction-Copy1.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Model stability, some background</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Model stability, some background</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-model">A model:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalized-form">normalized form</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-derivatives">The derivatives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-companion-matrix">The companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stability-and-the-eignvalues-of-the-companion-matrix">Stability and the eignvalues of the companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow">Calculating Eigenvalues and eigenvectors using modelflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-no-gain"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> No gain</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-with-increasing-amplitude"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &gt; 1\)</span> and imaginary parts. Oscillate with increasing amplitude</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-perputual"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert = 1\)</span> and imaginary parts. Oscillate perputual</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jackknife-identify-impact-from-each-equation">Jackknife identify impact from each equation.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-samuleson-multiplier-accelerator-model">Create a Samuleson multiplier accelerator model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-generates-a-dataframe-with-values">A function which generates a dataframe with values</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-to-forecast-and-calculate-eigenvalues">a function to forecast and calculate eigenvalues</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="model-stability-some-background">
<h1>Model stability, some background<a class="headerlink" href="#model-stability-some-background" title="Permalink to this headline">#</a></h1>
<div class="admonition warning" id="index-0">
<p class="admonition-title">Warning</p>
<p>This chapter is both unfinished and unpolished. Suggestions are very welcome.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Terminology varies very much between fields of study.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">Markdown</span>


<span class="kn">from</span> <span class="nn">modelclass</span> <span class="kn">import</span> <span class="n">model</span> 
<span class="kn">import</span> <span class="nn">modelmf</span>
</pre></div>
</div>
</div>
</div>
<section id="a-model">
<h2>A model:<a class="headerlink" href="#a-model" title="Permalink to this headline">#</a></h2>
<p>A model with:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\textbf n\)</span> number of endogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf k\)</span> number of exogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf r\)</span> max lag of endogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf s\)</span> max lag of exogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(t\)</span> time frame (year, quarter, day second or another another unit)</p></li>
</ul>
<p>can be written in two ways, normalized or un-normalized form</p>
<section id="normalized-form">
<h3>normalized form<a class="headerlink" href="#normalized-form" title="Permalink to this headline">#</a></h3>
<div class="amsmath math notranslate nohighlight" id="equation-cfd9db45-d185-4bf6-8d7e-b8510905416c">
<span class="eqno">()<a class="headerlink" href="#equation-cfd9db45-d185-4bf6-8d7e-b8510905416c" title="Permalink to this equation">#</a></span>\[\begin{eqnarray}
y_t^1 &amp; = &amp; y_t^2...,y_{t}^n...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^k,...x_{t-s}^1...,x_{t-s}^k) \\
y_t^2 &amp; = &amp; y_t^1...,y_{t}^n...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^k,...x_{t-s}^1...,x_{t-s}^k) \\
\vdots \\
y_t^n &amp; = &amp; y_t^1...,y_{t}^{n-1}...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^r,x..._{t-s}^1...,x_{t-s}^k)
\end{eqnarray}\]</div>
<p>Written in matrix notation where  <span class="math notranslate nohighlight">\(\textbf{y}_t\)</span> and <span class="math notranslate nohighlight">\(\textbf{x}_t\)</span> are vectors of endogenous/exogenous  variables for time t</p>
<div class="amsmath math notranslate nohighlight" id="equation-dff94a69-7f33-4e3a-9f5c-cc588f7cfdb5">
<span class="eqno">()<a class="headerlink" href="#equation-dff94a69-7f33-4e3a-9f5c-cc588f7cfdb5" title="Permalink to this equation">#</a></span>\[\begin{eqnarray}  
\textbf{y}_t &amp; = &amp; \textbf{F}( \textbf{y}_t \cdots \textbf{y}_{t-r},\textbf{x}_t \cdots \textbf{x}_{t-s})
\end{eqnarray}\]</div>
<p>The functions are normalized, meaning:</p>
<ul class="simple">
<li><p>Each endogenous variable is on the left hand side one time - and only one time.</p></li>
<li><p>An endogenous variable without lags can <strong>not</strong> be on the right hand side in an equation, which has the variable on the left hand side.</p></li>
</ul>
</section>
</section>
<section id="the-derivatives">
<h2>The derivatives<a class="headerlink" href="#the-derivatives" title="Permalink to this headline">#</a></h2>
<p>We can express the matrices of derivatives with respect to the endogenous and exogenous variables like this:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{eqnarray*}
A &amp; = &amp; \frac{\partial F}{\partial y_t^T} \\ \\
E_i &amp; = &amp; \frac{\partial F}{\partial y_{t-i}^T } \hspace{5 mm} i=1, \cdots , r\\  \\
F_j &amp; = &amp; \frac{\partial F}{\partial x_{t-j} ^T} \hspace{5 mm} j=0, \cdots , s\\  \\
\end{eqnarray*}\]</div>
</section>
<section id="the-companion-matrix">
<span id="index-1"></span><h2>The companion matrix<a class="headerlink" href="#the-companion-matrix" title="Permalink to this headline">#</a></h2>
<p>To calculate the effect of small perturbations around a solution the derivative matrices can be used.</p>
<p>For simplicity a system with <span class="math notranslate nohighlight">\(r\)</span> (max lag of endogenous variables) of 2 and <span class="math notranslate nohighlight">\(s\)</span> (max lag of exogenous variables)  of 1 we have the linearized model:</p>
<p><span class="math notranslate nohighlight">\(\Delta \textbf{y}_t = \textbf{A}\Delta  \textbf{y}_{t} + \Delta E_1 \textbf{y}_{t-1} + \Delta E_2 \textbf{y}_{t-2} +  E_3 \Delta  \textbf{y}_{t-3} + F_0 \Delta x_t + F_1 \Delta x_{t-1}\)</span></p>
<p>Rearranging the equation to isolate <span class="math notranslate nohighlight">\(\Delta \textbf{y}_{t}\)</span> on the left side:</p>
<p><span class="math notranslate nohighlight">\(
(  \mathbb{I}-\textbf{A}) \Delta \textbf{y}_{t} = E_1 \Delta \textbf{y}_{t-1} + \Delta E_2 \textbf{y}_{t-2} + \Delta E_3 \textbf{y}_{t-3} + F_0 \Delta x_t + F_1 \Delta x_{t-1}
\)</span></p>
<p><span class="math notranslate nohighlight">\(
\Delta \textbf{y}_{t} = (\mathbb{I}-\textbf{A})^{-1} E_1 \Delta \textbf{y}_{t-1} + (\mathbb{I}-\textbf{A})^{-1} \Delta E_2 \textbf{y}_{t-2} + (\mathbb{I}-\textbf{A})^{-1} \Delta E_3 \textbf{y}_{t-3} + (\mathbb{I}-\textbf{A})^{-1} F_0 \Delta x_t +  (\mathbb{I}-\textbf{A})^{-1} F_1 \Delta x_{t-1}
\)</span></p>
<p>This is a 3th order system of difference equations. In order to be able to find the gain stability of the system it has to be rewritten as 1st order system of difference equations. That is a system with only one lag. Fortunately there is
a standard way to do this. It runs as follow:</p>
<p>Using the state vector:
<span class="math notranslate nohighlight">\(
\textbf{z}_t = \begin{bmatrix} \textbf{y}_t \\ \textbf{y}_{t-1} \\ \textbf{y}_{t-2} \end{bmatrix}\)</span> and <span class="math notranslate nohighlight">\(\textbf{w}_t = \begin{bmatrix} \textbf{x}_t \\ \textbf{x}_{t-1} \end{bmatrix}
\)</span></p>
<p>The system can be expressed as:</p>
<p><span class="math notranslate nohighlight">\(
\Delta \textbf{z}_{t} = \underbrace{\begin{bmatrix} (\mathbb{I}-\textbf{A})^{-1}E_1 &amp; (\mathbb{I}-\textbf{A})^{-1}E_2 &amp; (\mathbb{I}-\textbf{A})^{-1}E_3 \\ \textbf{I} &amp; \textbf{0} &amp; \textbf{0} \\ \textbf{0} &amp; \textbf{I} &amp; \textbf{0} \end{bmatrix}}_{\textbf{C}} \Delta \textbf{z}_{t-1} +
\left[\begin{matrix}(\mathbb{I}-\textbf{A})^{-1} F_{0} &amp; (\mathbb{I}-\textbf{A})^{-1} F_{1}  \\{0} &amp; {0}  \\{0} &amp; {0} \\\end{matrix}\right]
\Delta \textbf{w}_t\)</span></p>
<p>This system is a first order system - and the stability can be evaluated using the matrix:</p>
<p><span class="math notranslate nohighlight">\(
\textbf{C} = \begin{bmatrix} (\mathbb{I}-\textbf{A})^{-1}E_1 &amp; (\mathbb{I}-\textbf{A})^{-1}E_2 &amp; (\mathbb{I}-\textbf{A})^{-1}E_3 \\ \textbf{I} &amp; \textbf{0} &amp; \textbf{0} \\ \textbf{0} &amp; \textbf{I} &amp; \textbf{0} \end{bmatrix}
\)</span></p>
<p>also known as <strong>the companion matrix</strong></p>
<p>If the systematic in construction the companion matrix with max lag endogenous variable of 2 can be extended to any numbers of lags.</p>
</section>
<section id="stability-and-the-eignvalues-of-the-companion-matrix">
<h2>Stability and the eignvalues of the companion matrix<a class="headerlink" href="#stability-and-the-eignvalues-of-the-companion-matrix" title="Permalink to this headline">#</a></h2>
<p>The dynamic behavior can be
evaluated by looking at the eigenvalues <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> of the companion matrix <span class="math notranslate nohighlight">\(((I-\bar A)^{-1}\bar E )\)</span>. Note that <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> can are complex numbers.</p>
<ul class="simple">
<li><p>If all <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> the system will converge.</p></li>
<li><p>If at least one of the eigenvalues is larger than one, the system will amplify.</p></li>
<li><p>If at least one <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> has an imaginary part the system will oscillate</p>
<ul>
<li><p>dampened if all <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> or</p></li>
<li><p>amplifying  if one <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &gt; 1\)</span>.</p></li>
</ul>
</li>
</ul>
<p>The eigenvalues and associated eigenvectors can be found by the function <code class="docutils literal notranslate"><span class="pre">\&lt;modelclass&gt;.get_df_eigen_dict()</span></code> which will be used below.</p>
<p>‘.get_df_eigen_dict()’ returns a dictionary where the key is the year and the value is a dataframe where first row is the eigenvalues
and the folowing rows are the eigenvectors.</p>
<p>The function below a small model Solow model and a dataframe, it the display the eigenvalues in a polar coordinate where imaginary values are at the y-axis.</p>
<p>The function also displays the result of the model. The result do not nessary give economic meaning. But shows how the system’s stability reflects the
eigenvalues of the companion matrix.</p>
</section>
<section id="calculating-eigenvalues-and-eigenvectors-using-modelflow">
<h2>Calculating Eigenvalues and eigenvectors using modelflow<a class="headerlink" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow" title="Permalink to this headline">#</a></h2>
<p>Modelflow has a can calculate the derivative matrices <span class="math notranslate nohighlight">\(A, E_i\)</span> and <span class="math notranslate nohighlight">\(F_j\)</span> and create the companion matrix and the associate eigenvalues and eigenvectors.</p>
<p>Below a function is defined. It sets up a simple solow growth model and associate data. After solving the model the companion matrix is calculated and
displayed.</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_eigen</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span><span class="n">acc</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">latexprint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Function which creates a Samuelson Multiplier accelerator model, runs it</span>
<span class="sd">    and alculates the eigenvalues for the compaignion matrix in order to </span>
<span class="sd">    evaluate stability. </span>
<span class="sd">    </span>
<span class="sd">    A polar plot of the compex eigenvalues and graphs of the endogenous variables can </span>
<span class="sd">    be displayes &#39;&#39;&#39;</span>
    
    <span class="n">fam</span>   <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\</span>
<span class="s1">    frml &lt;&gt;  y = c+i $ </span>
<span class="s1">    frml &lt;I&gt; c = </span><span class="si">{</span><span class="n">mul</span><span class="si">}</span><span class="s1"> * y(-1) $</span>
<span class="s1">    frml &lt;&gt;  i = </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s1"> * ((c-c(-1))+ 0.3 * (c(-2)-c(-1))  )$&#39;&#39;&#39;</span>

    <span class="n">mma</span> <span class="o">=</span> <span class="n">model</span><span class="p">(</span><span class="n">fam</span><span class="p">,</span><span class="n">modelname</span> <span class="o">=</span> <span class="s1">&#39;Accelerator multiplicator model&#39;</span><span class="p">)</span>
    
    <span class="c1"># Generate data</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1000</span><span class="p">,</span><span class="mi">200</span><span class="p">]]</span><span class="o">*</span><span class="n">years</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="mi">2018</span><span class="o">+</span><span class="n">years</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="s1">&#39;IM&#39;</span><span class="p">])</span>
    
    <span class="c1"># Generate lagged variables for c</span>
    <span class="n">baseline</span>  <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">mfcalc</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;c = </span><span class="si">{</span><span class="n">mul</span><span class="si">}</span><span class="s1"> * y(-1)&#39;</span><span class="p">)</span> 
    
    <span class="c1"># Solve the model </span>
    <span class="n">_</span>  <span class="o">=</span> <span class="n">mma</span><span class="p">(</span><span class="n">baseline</span><span class="p">,</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2050</span><span class="p">,</span><span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>     <span class="c1"># Solve the model </span>
    
    <span class="c1"># Retrieve a dictionary with a dataframe with eigenvalues and eigenvectors for each year </span>
    <span class="n">eig_dict</span> <span class="o">=</span> <span class="n">mma</span><span class="o">.</span><span class="n">get_df_eigen_dict</span><span class="p">()</span>
    
    <span class="c1"># In this example we only want the values for one year. The model is linear and time independent </span>
    <span class="n">eig21</span> <span class="o">=</span> <span class="n">eig_dict</span><span class="p">[</span><span class="mi">2021</span><span class="p">]</span>
    
    <span class="c1"># Define a function which calculates a list of absolute values when served a dataframe column of complex numbers</span>
    <span class="n">compabs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="nb">complex</span><span class="p">:</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="nb">complex</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    
    <span class="c1"># now only retain the columns where the length of the eigenvalues are above 0.0001 </span>
    <span class="n">eig21out</span> <span class="o">=</span> <span class="p">(</span><span class="n">eig21</span><span class="o">.</span>   
                <span class="n">T</span><span class="o">.</span>        <span class="c1"># Trtanspose as we query and eval on columns </span>
                <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;absolute_value=@compabs(Eigenvalues)&#39;</span><span class="p">)</span><span class="o">.</span> <span class="c1"># calculate the absolute value of the eigenvalue </span>
                <span class="n">query</span><span class="p">(</span><span class="s1">&#39;absolute_value&gt;=0.0001&#39;</span><span class="p">)</span><span class="o">.</span>              <span class="c1"># Select the rows where the abs value is above 0+.0001</span>
                <span class="n">drop</span><span class="p">(</span><span class="s1">&#39;absolute_value&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>                <span class="c1"># We dont need the absolute value anymore, so the column is dropped. </span>
                <span class="n">T</span><span class="p">)</span>   <span class="c1"># Trtanspose again. </span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;**Model where multiplier = </span><span class="si">{</span><span class="n">mul</span><span class="si">}</span><span class="s1"> and accelerator = </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s1">**&#39;</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">mma</span><span class="o">.</span><span class="n">equations</span><span class="p">)</span>
    <span class="n">display</span><span class="p">(</span><span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span><span class="o">.</span><span class="n">eigenvector_plot</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">per</span><span class="o">=</span><span class="mi">2023</span><span class="p">));</span>       <span class="c1"># show the eigenvalues </span>
    <span class="n">display</span> <span class="p">(</span><span class="n">mma</span><span class="p">[[</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span><span class="p">,</span><span class="s1">&#39;I&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;values for multiplier = </span><span class="si">{</span><span class="n">mul</span><span class="si">}</span><span class="s1"> and accelerator = </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">))</span>  <span class="c1"># Show the solution</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span> 

        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;**Compagnion matrix**&#39;</span><span class="p">))</span>

        <span class="n">display</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">compstyle</span><span class="p">(</span> <span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span><span class="o">.</span><span class="n">get_df_comp_dict</span><span class="p">()[</span><span class="mi">2021</span><span class="p">]))</span> 


        <span class="n">display</span><span class="p">(</span><span class="n">eig21</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Original eigenvalues and -vectors&#39;</span><span class="p">))</span>
        <span class="n">display</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">compstyle</span><span class="p">(</span><span class="n">eig21out</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;&lt;b&gt;Non zero eigenvalues and -vectors&#39;</span><span class="p">))</span>
       <span class="c1">#display(mma.stability_newton.eigenvector_plot(size=(4,4),per=2023));       # show the eigenvalues </span>

        <span class="k">if</span> <span class="n">latexprint</span><span class="p">:</span> 
            <span class="n">jacobi</span><span class="o">=</span> <span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span><span class="o">.</span><span class="n">A_dic</span><span class="p">[</span><span class="mi">2021</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">l</span><span class="p">,</span><span class="n">j</span> <span class="ow">in</span> <span class="n">jacobi</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> 
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;A = &#39;</span> <span class="k">if</span> <span class="n">l</span><span class="o">==</span><span class="s1">&#39;lag=0&#39;</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;E_</span><span class="si">{</span><span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1"> = &#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">to_latex</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span>
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="lvert-textbf-e-t-lvert-1-no-gain">
<h2><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> No gain<a class="headerlink" href="#lvert-textbf-e-t-lvert-1-no-gain" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xx</span> <span class="o">=</span> <span class="n">calculate_eigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* Take care. Lags or leads in the equations, mfcalc run for 2019 to 2047
</pre></div>
</div>
<p><strong>Model where multiplier = 0.5 and accelerator = 0.1</strong></p>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    frml &lt;&gt;  y = c+i $ 
    frml &lt;I&gt; c = 0.5 * y(-1) $
    frml &lt;&gt;  i = 0.1 * ((c-c(-1))+ 0.3 * (c(-2)-c(-1))  )$
</pre></div>
</div>
<img alt="../../_images/60a0dbbde4c59ff9bfa8782f44fe1468d12474286765391d282dc4a3bf4457da.png" src="../../_images/60a0dbbde4c59ff9bfa8782f44fe1468d12474286765391d282dc4a3bf4457da.png" />
<img alt="../../_images/59160854af2f6fdd918db862a7253ee95049c7c3310fb40f116a55467f5d2e50.png" src="../../_images/59160854af2f6fdd918db862a7253ee95049c7c3310fb40f116a55467f5d2e50.png" />
</div>
</div>
</section>
<section id="lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-with-increasing-amplitude">
<h2><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &gt; 1\)</span> and imaginary parts. Oscillate with increasing amplitude<a class="headerlink" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-with-increasing-amplitude" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">calculate_eigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* Take care. Lags or leads in the equations, mfcalc run for 2019 to 2047
</pre></div>
</div>
<p><strong>Model where multiplier = 0.8 and accelerator = 0.9</strong></p>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    frml &lt;&gt;  y = c+i $ 
    frml &lt;I&gt; c = 0.8 * y(-1) $
    frml &lt;&gt;  i = 0.9 * ((c-c(-1))+ 0.3 * (c(-2)-c(-1))  )$
</pre></div>
</div>
<img alt="../../_images/4180eb793cf0b8a80883cf067ba1814c5faf3beb8cc275b88bfb9072eb99f55c.png" src="../../_images/4180eb793cf0b8a80883cf067ba1814c5faf3beb8cc275b88bfb9072eb99f55c.png" />
<img alt="../../_images/b1ad2ea0af209968c793277ba51fbfda7a8fc2b4b7323280e88585025a58f9f8.png" src="../../_images/b1ad2ea0af209968c793277ba51fbfda7a8fc2b4b7323280e88585025a58f9f8.png" />
</div>
</div>
</section>
<section id="lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-perputual">
<h2><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert = 1\)</span> and imaginary parts. Oscillate perputual<a class="headerlink" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-perputual" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">newton</span> <span class="o">=</span>  <span class="n">calculate_eigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.5500</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* Take care. Lags or leads in the equations, mfcalc run for 2019 to 2047
</pre></div>
</div>
<p><strong>Model where multiplier = 0.55 and accelerator = 2</strong></p>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    frml &lt;&gt;  y = c+i $ 
    frml &lt;I&gt; c = 0.55 * y(-1) $
    frml &lt;&gt;  i = 2 * ((c-c(-1))+ 0.3 * (c(-2)-c(-1))  )$
</pre></div>
</div>
<img alt="../../_images/4bc655931be7f61f9ee68bc2db49597f322d17be41c256dbfe18c06ed9a65c6a.png" src="../../_images/4bc655931be7f61f9ee68bc2db49597f322d17be41c256dbfe18c06ed9a65c6a.png" />
<img alt="../../_images/62393e6afc0de3e046edfd9e1d19f36d936817fd1927713c60ced7693276ae1c.png" src="../../_images/62393e6afc0de3e046edfd9e1d19f36d936817fd1927713c60ced7693276ae1c.png" />
</div>
</div>
</section>
<section id="jackknife-identify-impact-from-each-equation">
<h2>Jackknife identify impact from each equation.<a class="headerlink" href="#jackknife-identify-impact-from-each-equation" title="Permalink to this headline">#</a></h2>
<p>To understand the impact of each equation a jackknife can be made. This is done by deleting  the rows and columns for each equation and record the new eigenvalues.</p>
<p>The idea is to try to identify the equations which contributes most to the total eigenvalues.</p>
<p>The newton object returned above will also contains this operation. The <code class="docutils literal notranslate"><span class="pre">newton.get_eigen_jackknife_abs_select(year)</span></code> function will return the max absolute eigenvalue when for each equations is deleted. It also returns the eigenvalues when no equation is deleted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The terminology is loosely coined from Jackknife resampling https://en.wikipedia.org/wiki/Jackknife_resampling.</p>
<p>Contributions to better naming are very welcome.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">newton</span><span class="o">.</span><span class="n">get_eigen_jackknife_abs_select</span><span class="p">(</span><span class="mi">2025</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 C
1 I
2 Y
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;ALL&#39;: 0.9958213512988556,
 &#39;C_excluded&#39;: 0.0,
 &#39;I_excluded&#39;: 0.55,
 &#39;Y_excluded&#39;: 0.0}
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="create-a-samuleson-multiplier-accelerator-model">
<h1>Create a Samuleson multiplier accelerator model<a class="headerlink" href="#create-a-samuleson-multiplier-accelerator-model" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fma</span>   <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">gdp = consumption+investment  </span>
<span class="s1">consumption = mul * gdp(-1)</span>
<span class="s1">investment = acc * (consumption-consumption(-1)) + exo_investment&#39;&#39;&#39;</span>
<span class="n">mma</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">from_eq</span><span class="p">(</span><span class="n">fma</span><span class="p">,</span><span class="n">modelname</span> <span class="o">=</span> <span class="s1">&#39;Accelerator multiplicator model&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mma</span><span class="o">.</span><span class="n">drawmodel</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/592fd367897a0602a0e76522fff511f79840e4a016aeb76a0638705e550615d4.svg" src="../../_images/592fd367897a0602a0e76522fff511f79840e4a016aeb76a0638705e550615d4.svg" /></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="a-function-which-generates-a-dataframe-with-values">
<h1>A function which generates a dataframe with values<a class="headerlink" href="#a-function-which-generates-a-dataframe-with-values" title="Permalink to this headline">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_df</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">gdp</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">im</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="s1">&#39;Creates imput dataframe to accelerator multiplier model &#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">gdp</span><span class="p">]]</span><span class="o">*</span><span class="n">years</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="mi">2018</span><span class="o">+</span><span class="n">years</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GDP&#39;</span><span class="p">])</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;MUL&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">mul</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ACC&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">acc</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;CONSUMPTION&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">gdp</span><span class="o">*</span><span class="n">mul</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;EXO_INVESTMENT&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">im</span>
    <span class="k">return</span> <span class="n">df</span>
<span class="n">base</span> <span class="o">=</span> <span class="n">get_df</span><span class="p">()</span>
<span class="n">base</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GDP</th>
      <th>MUL</th>
      <th>ACC</th>
      <th>CONSUMPTION</th>
      <th>EXO_INVESTMENT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2019</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2022</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="a-function-to-forecast-and-calculate-eigenvalues">
<h1>a function to forecast and calculate eigenvalues<a class="headerlink" href="#a-function-to-forecast-and-calculate-eigenvalues" title="Permalink to this headline">#</a></h1>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\stability"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Model stability, some background</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-model">A model:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalized-form">normalized form</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-derivatives">The derivatives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-companion-matrix">The companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stability-and-the-eignvalues-of-the-companion-matrix">Stability and the eignvalues of the companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow">Calculating Eigenvalues and eigenvectors using modelflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-no-gain"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> No gain</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-with-increasing-amplitude"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &gt; 1\)</span> and imaginary parts. Oscillate with increasing amplitude</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lvert-textbf-e-t-lvert-1-and-imaginary-parts-oscillate-perputual"><span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert = 1\)</span> and imaginary parts. Oscillate perputual</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#jackknife-identify-impact-from-each-equation">Jackknife identify impact from each equation.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-samuleson-multiplier-accelerator-model">Create a Samuleson multiplier accelerator model</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-generates-a-dataframe-with-values">A function which generates a dataframe with values</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-to-forecast-and-calculate-eigenvalues">a function to forecast and calculate eigenvalues</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Andrew Burns and Ib Hansen
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright World Bank. 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>