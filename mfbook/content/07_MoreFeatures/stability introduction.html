

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1. Model stability, some background &#8212; The World Bank&#39;s MFMod Framework in Python with Modelflow</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="application/vnd.jupyter.widget-state+json">{"state": {"89bfa4b4117145cbb8b8d1319644f9c0": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d2d9a2e9776d443e8204e1d15cc5eea9": {"model_name": "ProgressStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "7ef6ada46c824924bc3917449ecc5dab": {"model_name": "FloatProgressModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_89bfa4b4117145cbb8b8d1319644f9c0", "max": 3.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_d2d9a2e9776d443e8204e1d15cc5eea9", "tabbable": null, "tooltip": null, "value": 3.0}}, "cb2c528e7c114fe9848f4d7338b52470": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "4d2e430b41a54e06bbbe4bd70b71f173": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "cd45ff4156ef42b0a399fb50b0a7c709": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_cb2c528e7c114fe9848f4d7338b52470", "placeholder": "\u200b", "style": "IPY_MODEL_4d2e430b41a54e06bbbe4bd70b71f173", "tabbable": null, "tooltip": null, "value": "100%"}}, "0dd24edb0e1d4924a52655b107aef305": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "f9cd5ecf5c944f34a94c7aa417817a99": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "b88639ba239f48bc889d9db44b88a667": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_0dd24edb0e1d4924a52655b107aef305", "placeholder": "\u200b", "style": "IPY_MODEL_f9cd5ecf5c944f34a94c7aa417817a99", "tabbable": null, "tooltip": null, "value": " 3/3 [00:00&lt;00:00,  6.58it/s]"}}, "fd21362146be40758ba6a0b0e8244f03": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1ef2792ccbf14dc5a319dbd98ca56df5": {"model_name": "HBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_cd45ff4156ef42b0a399fb50b0a7c709", "IPY_MODEL_7ef6ada46c824924bc3917449ecc5dab", "IPY_MODEL_b88639ba239f48bc889d9db44b88a667"], "layout": "IPY_MODEL_fd21362146be40758ba6a0b0e8244f03", "tabbable": null, "tooltip": null}}}, "version_major": 2, "version_minor": 0}</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script crossorigin="anonymous" data-jupyter-widgets-cdn="https://cdn.jsdelivr.net/npm/" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.6/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/07_MoreFeatures/stability introduction';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2. Model eigenvalues" href="EigenValues.html" />
    <link rel="prev" title="2. Analyzing the impact of a shock" href="../06_ModelAnalytics/AttributionSomeFeatures.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
    <p class="title logo__title">The World Bank's MFMod Framework in Python with Modelflow</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction.html">
                    Foreword
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">The World Bank's MFMod Framework and Modelflow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_MacrostructuralModels/MacroStructuralModels.html">2. Macrostructural models</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../03_Installation/InstallingModelFlow.html">4. Installation of Modelflow</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/InstallingPython.html">4.1. Installation of Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/InstallingModelFlowpackage.html">4.2. Installation of  <code class="docutils literal notranslate"><span class="pre">Modelflow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/UpdateModelFlow.html">4.3. Updating Modelflow</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Some python essentials for using World Bank models with modelflow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/Intro_Jupyter_notebook.html">1. Introduction to  Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/PythonBasics.html">2. Some Python basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/PandasDataFrames.html">3. Introduction to Pandas, Pandas Series and Pandas dataframes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Selected modelflow extensions to pandas</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/Modelflow%20and%20Dataframes.html">1. Modelflow Extensions to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/UpdateCommand.html">2. <code class="docutils literal notranslate"><span class="pre">.upd()</span></code>  Return an updated dataframe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/mfcalc.html">3. The .mfcalc() method a modelflow  extension of pandas</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using modelflow with World Bank models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/AccessingWBModels.html">1. Using <code class="docutils literal notranslate"><span class="pre">modelflow</span></code> with World Bank models</a></li>

<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/WorkingwWBModels.html">3. Working with a World Bank Model under modelflow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../05_WBModels/ScenarioAnalysis.html">4. Scenario analysis</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_WBModels/ReportWriting.html">4.5. Report writing and scenario results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/MoreComplexScenarios.html">5. More complex scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="Targeting.html">6. A simulation that targets a specific outcome</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Analytics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../06_ModelAnalytics/ModelStructure.html">1. Model analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_ModelAnalytics/AttributionSomeFeatures.html">2. Analyzing the impact of a shock</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Stability</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1. Model stability, some background</a></li>
<li class="toctree-l1"><a class="reference internal" href="EigenValues.html">2. Model eigenvalues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Technical how tos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="GettingHelp.html">1. Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelFlowCommandReference.html">2. Modelflow methods reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Backmatter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Reference.html">Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/IbHansen/modelflow-manual/blob/main/papers/mfbook/content/07_MoreFeatures/stability introduction.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/IbHansen/modelflow-manual" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/07_MoreFeatures/stability introduction.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Model stability, some background</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-model">1.1. A model:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalized-form">1.1.1. normalized form</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-derivatives">1.2. The derivatives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-companion-matrix">1.3. The companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stability-and-the-eignvalues-of-the-companion-matrix">1.4. Stability and the eignvalues of the companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow">1.5. Calculating Eigenvalues and eigenvectors using modelflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-simple-samuleson-multiplier-accelerator-model">1.6. A simple Samuleson multiplier accelerator model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-generates-a-dataframe-with-values">1.7. A function which generates a dataframe with values</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-simulate-the-model-and-calculates-eigenvalues">1.8. A function which simulate the model and calculates eigenvalues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#no-amplification">1.9. No amplification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explosion">1.10. Explosion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploding-oscillations">1.11. Exploding oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perpetual-oscillations">1.12. Perpetual oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dampened-oscillations">1.13. Dampened oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-jackknife-procedure-to-attempt-to-the-contribution-of-each-equation-to-model-instability">1.14. A Jackknife procedure to attempt to the contribution of each equation to model instability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.14.1. </a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="model-stability-some-background">
<h1><span class="section-number">1. </span>Model stability, some background<a class="headerlink" href="#model-stability-some-background" title="Permalink to this headline">#</a></h1>
<div class="admonition warning" id="index-0">
<p class="admonition-title">Warning</p>
<p>This chapter is both unfinished and unpolished. Suggestions are very welcome.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Terminology varies very much between fields of study.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span><span class="p">,</span> <span class="n">Markdown</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">latex</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<section id="a-model">
<h2><span class="section-number">1.1. </span>A model:<a class="headerlink" href="#a-model" title="Permalink to this headline">#</a></h2>
<p>A model with:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(\textbf n\)</span> number of endogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf k\)</span> number of exogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf r\)</span> max lag of endogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(\textbf s\)</span> max lag of exogeneous variables</p></li>
<li><p><span class="math notranslate nohighlight">\(t\)</span> time frame (year, quarter, day second or another another unit)</p></li>
</ul>
<p>can be written in two ways, normalized or un-normalized form</p>
<section id="normalized-form">
<h3><span class="section-number">1.1.1. </span>normalized form<a class="headerlink" href="#normalized-form" title="Permalink to this headline">#</a></h3>
<div class="amsmath math notranslate nohighlight" id="equation-e79a6ab9-ada9-4da3-a37d-572f289c6635">
<span class="eqno">(1.1)<a class="headerlink" href="#equation-e79a6ab9-ada9-4da3-a37d-572f289c6635" title="Permalink to this equation">#</a></span>\[\begin{eqnarray}
y_t^1 &amp; = &amp; y_t^2...,y_{t}^n...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^k,...x_{t-s}^1...,x_{t-s}^k) \\
y_t^2 &amp; = &amp; y_t^1...,y_{t}^n...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^k,...x_{t-s}^1...,x_{t-s}^k) \\
\vdots \\
y_t^n &amp; = &amp; y_t^1...,y_{t}^{n-1}...y_{t-r}^1...,y_{t-r}^n,x_t^1...x_{t}^r,x..._{t-s}^1...,x_{t-s}^k)
\end{eqnarray}\]</div>
<p>Written in matrix notation where  <span class="math notranslate nohighlight">\(\textbf{y}_t\)</span> and <span class="math notranslate nohighlight">\(\textbf{x}_t\)</span> are vectors of endogenous/exogenous  variables for time t</p>
<div class="amsmath math notranslate nohighlight" id="equation-040ab421-63ba-4011-ba50-38bf5b078c97">
<span class="eqno">(1.2)<a class="headerlink" href="#equation-040ab421-63ba-4011-ba50-38bf5b078c97" title="Permalink to this equation">#</a></span>\[\begin{eqnarray}  
\textbf{y}_t &amp; = &amp; \textbf{F}( \textbf{y}_t \cdots \textbf{y}_{t-r},\textbf{x}_t \cdots \textbf{x}_{t-s})
\end{eqnarray}\]</div>
<p>The functions are normalized, meaning:</p>
<ul class="simple">
<li><p>Each endogenous variable is on the left hand side one time - and only one time.</p></li>
<li><p>An endogenous variable without lags can <strong>not</strong> be on the right hand side in an equation, which has the variable on the left hand side.</p></li>
</ul>
</section>
</section>
<section id="the-derivatives">
<h2><span class="section-number">1.2. </span>The derivatives<a class="headerlink" href="#the-derivatives" title="Permalink to this headline">#</a></h2>
<p>We can express the matrices of derivatives with respect to the endogenous and exogenous variables like this:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{eqnarray*}
A &amp; = &amp; \frac{\partial F}{\partial y_t^T} \\ \\
E_i &amp; = &amp; \frac{\partial F}{\partial y_{t-i}^T } \hspace{5 mm} i=1, \cdots , r\\  \\
F_j &amp; = &amp; \frac{\partial F}{\partial x_{t-j} ^T} \hspace{5 mm} j=0, \cdots , s\\  \\
\end{eqnarray*}\]</div>
</section>
<section id="the-companion-matrix">
<span id="index-1"></span><h2><span class="section-number">1.3. </span>The companion matrix<a class="headerlink" href="#the-companion-matrix" title="Permalink to this headline">#</a></h2>
<p>To calculate the effect of small perturbations around a solution the derivative matrices can be used.</p>
<p>For simplicity a system with <span class="math notranslate nohighlight">\(r\)</span> (max lag of endogenous variables) of 2 and <span class="math notranslate nohighlight">\(s\)</span> (max lag of exogenous variables)  of 1 we have the linearized model:</p>
<p><span class="math notranslate nohighlight">\(\Delta \textbf{y}_t = \textbf{A}\Delta  \textbf{y}_{t} + \Delta E_1 \textbf{y}_{t-1} + \Delta E_2 \textbf{y}_{t-2} +  E_3 \Delta  \textbf{y}_{t-3} + F_0 \Delta x_t + F_1 \Delta x_{t-1}\)</span></p>
<p>Rearranging the equation to isolate <span class="math notranslate nohighlight">\(\Delta \textbf{y}_{t}\)</span> on the left side:</p>
<p><span class="math notranslate nohighlight">\((\mathbb{I}-\textbf{A}) \Delta \textbf{y}_{t} = E_1 \Delta \textbf{y}_{t-1} + \Delta E_2 \textbf{y}_{t-2} + \Delta E_3 \textbf{y}_{t-3} + F_0 \Delta x_t + F_1 \Delta x_{t-1}\)</span></p>
<p><span class="math notranslate nohighlight">\(\Delta \textbf{y}_{t} = (\mathbb{I}-\textbf{A})^{-1} E_1 \Delta \textbf{y}_{t-1} + (\mathbb{I}-\textbf{A})^{-1} \Delta E_2 \textbf{y}_{t-2} + (\mathbb{I}-\textbf{A})^{-1} \Delta E_3 \textbf{y}_{t-3} + (\mathbb{I}-\textbf{A})^{-1} F_0 \Delta x_t +  (\mathbb{I}-\textbf{A})^{-1} F_1 \Delta x_{t-1}\)</span></p>
<p>This is a 3th order system of difference equations. In order to be able to find the gain stability of the system it has to be rewritten as 1st order system of difference equations. That is a system with only one lag. Fortunately there is
a standard way to do this. It runs as follow:</p>
<p>Using the state vector:
<span class="math notranslate nohighlight">\(\textbf{z}_t = \begin{bmatrix} \textbf{y}_t \\ \textbf{y}_{t-1} \\ \textbf{y}_{t-2} \end{bmatrix}\)</span> and <span class="math notranslate nohighlight">\(\textbf{w}_t = \begin{bmatrix} \textbf{x}_t \\ \textbf{x}_{t-1} \end{bmatrix}\)</span></p>
<p>The system can be expressed as:</p>
<p><span class="math notranslate nohighlight">\(\Delta \textbf{z}_{t} = \underbrace{\begin{bmatrix} (\mathbb{I}-\textbf{A})^{-1}E_1 &amp; (\mathbb{I}-\textbf{A})^{-1}E_2 &amp; (\mathbb{I}-\textbf{A})^{-1}E_3 \\ \textbf{I} &amp; \textbf{0} &amp; \textbf{0} \\ \textbf{0} &amp; \textbf{I} &amp; \textbf{0} \end{bmatrix}}_{\textbf{C}} \Delta \textbf{z}_{t-1} +
\left[\begin{matrix}(\mathbb{I}-\textbf{A})^{-1} F_{0} &amp; (\mathbb{I}-\textbf{A})^{-1} F_{1}  \\{0} &amp; {0}  \\{0} &amp; {0} \\\end{matrix}\right]
\Delta \textbf{w}_t\)</span></p>
<p>This system is a first order system - and the stability can be evaluated using the matrix:</p>
<p><span class="math notranslate nohighlight">\(\textbf{C} = \begin{bmatrix} (\mathbb{I}-\textbf{A})^{-1}E_1 &amp; (\mathbb{I}-\textbf{A})^{-1}E_2 &amp; (\mathbb{I}-\textbf{A})^{-1}E_3 \\ \textbf{I} &amp; \textbf{0} &amp; \textbf{0} \\ \textbf{0} &amp; \textbf{I} &amp; \textbf{0} \end{bmatrix}\)</span></p>
<p>also known as <strong>the companion matrix</strong></p>
<p>If the systematic in construction the companion matrix with max lag endogenous variable of 2 can be extended to any numbers of lags.</p>
</section>
<section id="stability-and-the-eignvalues-of-the-companion-matrix">
<h2><span class="section-number">1.4. </span>Stability and the eignvalues of the companion matrix<a class="headerlink" href="#stability-and-the-eignvalues-of-the-companion-matrix" title="Permalink to this headline">#</a></h2>
<p>The dynamic behavior can be
evaluated by looking at the eigenvalues <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> of the companion matrix <span class="math notranslate nohighlight">\(((I-\bar A)^{-1}\bar E )\)</span>. Note that <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> can are complex numbers.</p>
<ul class="simple">
<li><p>If all <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> the system will converge.</p></li>
<li><p>If at least one of the eigenvalues is larger than one, the system will amplify.</p></li>
<li><p>If at least one <span class="math notranslate nohighlight">\(\textbf{e}_{t}\)</span> has an imaginary part the system will oscillate</p>
<ul>
<li><p>dampened if all <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &lt; 1\)</span> or</p></li>
<li><p>amplifying  if one <span class="math notranslate nohighlight">\(\lvert \textbf{e}_{t} \lvert &gt; 1\)</span>.</p></li>
</ul>
</li>
</ul>
<p>The eigenvalues and associated eigenvectors of a model can be calculated using the method <code class="docutils literal notranslate"><span class="pre">.get_df_eigen_dict()</span></code>, which returns a dictionary where the key is the year and the value is a dataframe the first row of which is the eigenvalues of the model in that year and the following rows are the eigenvectors.</p>
<p>The function eigen values and eigen vectors of a model cannot be easily related to individual equations in the model, but do speak to how the interactions within and across equations affects the  stability of the model.</p>
</section>
<section id="calculating-eigenvalues-and-eigenvectors-using-modelflow">
<h2><span class="section-number">1.5. </span>Calculating Eigenvalues and eigenvectors using modelflow<a class="headerlink" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow" title="Permalink to this headline">#</a></h2>
<p>Modelflow can calculate the derivative matrices <span class="math notranslate nohighlight">\(A, E_i\)</span> and <span class="math notranslate nohighlight">\(F_j\)</span> describd above, the companion matrix and the associate eigenvalues and eigenvectors for any give model.</p>
<p>Below</p>
<ul class="simple">
<li><p>a simple Samuelson multiplier accelerator model is created.</p></li>
<li><p>a function <code class="docutils literal notranslate"><span class="pre">get_df</span></code> is defined that generates a test dataframe with model parameters and variables</p></li>
<li><p>a function <code class="docutils literal notranslate"><span class="pre">geteigen</span></code> is defined that:</p>
<ul>
<li><p>use the model to simulate a generated dataframe.</p></li>
<li><p>calculates the eigenvalues</p></li>
<li><p>display the eigenvalues in a polar coordinate where imaginary values are at the y-axis.</p></li>
<li><p>The function also displays the result of the model</p></li>
<li><p>optional displays the companion matrix and the non-zero eigenvalues and associate eigenvectors.</p></li>
</ul>
</li>
</ul>
</section>
<section id="a-simple-samuleson-multiplier-accelerator-model">
<h2><span class="section-number">1.6. </span>A simple Samuleson multiplier accelerator model<a class="headerlink" href="#a-simple-samuleson-multiplier-accelerator-model" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Create a multi-line string comprising the equations of the model.</span>
<span class="n">fma</span>   <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">gdp = consumption+investment  </span>
<span class="s1">consumption = mul * gdp(-1)</span>
<span class="s1">investment = acc * (consumption-consumption(-1))  + exo_investment&#39;&#39;&#39;</span>

<span class="c1">#Create a model object from the equations (no data yet)</span>
<span class="n">mma</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">from_eq</span><span class="p">(</span><span class="n">fma</span><span class="p">,</span><span class="n">modelname</span> <span class="o">=</span> <span class="s1">&#39;Accelerator multiplicator model&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mma</span><span class="o">.</span><span class="n">drawmodel</span><span class="p">(</span><span class="n">png</span><span class="o">=</span><span class="n">latex</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/44be2055dbab539409f387bad0315a61ce7c38590adcbcbe270507dcce270dfd.png" src="../../_images/44be2055dbab539409f387bad0315a61ce7c38590adcbcbe270507dcce270dfd.png" />
</div>
</div>
</section>
<section id="a-function-which-generates-a-dataframe-with-values">
<h2><span class="section-number">1.7. </span>A function which generates a dataframe with values<a class="headerlink" href="#a-function-which-generates-a-dataframe-with-values" title="Permalink to this headline">#</a></h2>
<p>The below function will generate some data for the model based on the parameters passed to it. If  no parameters are passed (as in the case of the base dataframe at the end of the code block), the default parameters will be used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_df</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">gdp</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">im</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
    <span class="s1">&#39;Creates imput dataframe to accelerator multiplier model &#39;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">gdp</span><span class="p">]]</span><span class="o">*</span><span class="n">years</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="mi">2018</span><span class="o">+</span><span class="n">years</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GDP&#39;</span><span class="p">])</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;MUL&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">mul</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;ACC&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">acc</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;CONSUMPTION&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">gdp</span><span class="o">*</span><span class="n">mul</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;EXO_INVESTMENT&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">im</span>
    <span class="k">return</span> <span class="n">df</span>


<span class="n">base</span> <span class="o">=</span> <span class="n">get_df</span><span class="p">()</span>
<span class="n">base</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GDP</th>
      <th>MUL</th>
      <th>ACC</th>
      <th>CONSUMPTION</th>
      <th>EXO_INVESTMENT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2019</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
    <tr>
      <th>2022</th>
      <td>1000</td>
      <td>0.9</td>
      <td>0.5</td>
      <td>900.0</td>
      <td>200</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="a-function-which-simulate-the-model-and-calculates-eigenvalues">
<h2><span class="section-number">1.8. </span>A function which simulate the model and calculates eigenvalues<a class="headerlink" href="#a-function-which-simulate-the-model-and-calculates-eigenvalues" title="Permalink to this headline">#</a></h2>
<p>This can be ignored if you are not interested in the python implementation</p>
<div class="cell tag_hide-cell docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell content</span>
<span class="expanded">Hide code cell content</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span><span class="n">acc</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">showmore</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;Function which creates a Samuelson Multiplier accelerator model, runs it and </span>
<span class="sd">    calculates the eigenvalues for the compaignion matrix in order to evaluate stability&#39;&#39;&#39;</span>
    
    <span class="c1">#Pass the parameters entered to the get_df routine so as to have data and parameters for the model.</span>
    <span class="n">baseline_not_solved</span> <span class="o">=</span> <span class="n">get_df</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span><span class="n">acc</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="n">years</span><span class="p">)</span>
    <span class="n">baseline</span>  <span class="o">=</span> <span class="n">mma</span><span class="p">(</span><span class="n">baseline_not_solved</span><span class="p">,</span><span class="n">silent</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>     <span class="c1"># Solve the baseline model </span>
    
    <span class="c1"># Retrieve a dictionary with a dataframe with eigenvalues and eigenvectors for each year </span>
    <span class="n">eig_dict</span> <span class="o">=</span> <span class="n">mma</span><span class="o">.</span><span class="n">get_df_eigen_dict</span><span class="p">()</span>
    
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;**Model where multiplier = </span><span class="si">{</span><span class="n">mul</span><span class="si">}</span><span class="s1"> and accelerator = </span><span class="si">{</span><span class="n">acc</span><span class="si">}</span><span class="s1">**&#39;</span><span class="p">))</span>
    <span class="n">display</span><span class="p">(</span><span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span><span class="o">.</span><span class="n">eigenvector_plot</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">per</span><span class="o">=</span><span class="mi">2023</span><span class="p">));</span>       <span class="c1"># show the eigenvalues </span>
 
    <span class="c1"># Show the solution</span>
    <span class="n">mma</span><span class="p">[</span><span class="s1">&#39;gdp consumption investment&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Values&#39;</span><span class="p">,</span><span class="n">colrow</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> 
        
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span> 
        <span class="c1"># In this example we only want the values for one year. </span>
        <span class="c1"># The model is linear and time independent </span>
        <span class="n">eig21</span> <span class="o">=</span> <span class="n">eig_dict</span><span class="p">[</span><span class="mi">2021</span><span class="p">]</span>

        <span class="c1"># Define a function which calculates a list of absolute values when served a dataframe column of complex numbers</span>
        <span class="n">compabs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="nb">complex</span><span class="p">:</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="nb">complex</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>

        <span class="c1"># retain only those columns where the length of the eigenvalues are above 0.0001 </span>
        <span class="n">eig21out</span> <span class="o">=</span> <span class="p">(</span><span class="n">eig21</span><span class="o">.</span>   
                    <span class="n">T</span><span class="o">.</span>        <span class="c1"># Transpose as we query and eval on columns </span>
                    <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;absolute_value=@compabs(Eigenvalues)&#39;</span><span class="p">)</span><span class="o">.</span> <span class="c1"># calculate the absolute value of the eigenvalue </span>
                    <span class="n">query</span><span class="p">(</span><span class="s1">&#39;absolute_value&gt;=0.0001&#39;</span><span class="p">)</span><span class="o">.</span>              <span class="c1"># Select the rows where the abs value is above 0+.0001</span>
                    <span class="n">drop</span><span class="p">(</span><span class="s1">&#39;absolute_value&#39;</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>                <span class="c1"># We dont need the absolute value anymore, so the column is dropped. </span>
                    <span class="n">T</span><span class="p">)</span>   <span class="c1"># Transpose again. </span>


        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;**Companion matrix**&#39;</span><span class="p">))</span>

       <span class="c1"># display(model.compstyle( mma.stability_newton.get_df_comp_dict()[2021])) </span>
        <span class="n">display</span><span class="p">(</span> <span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span><span class="o">.</span><span class="n">get_df_comp_dict</span><span class="p">()[</span><span class="mi">2021</span><span class="p">])</span> 


        <span class="c1">#   display(eig21.style.set_caption(&#39;&lt;b&gt;Original eigenvalues and -vectors&#39;))</span>
        <span class="c1">#display(model.compstyle(eig21out).set_caption(&#39;&lt;b&gt;Non zero eigenvalues and -vectors&#39;))</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s1">&#39;**Non zero eigenvalues and -vectors**&#39;</span><span class="p">))</span>
        <span class="n">display</span><span class="p">(</span><span class="n">eig21out</span><span class="p">)</span>

        
    <span class="k">return</span>  <span class="n">mma</span><span class="o">.</span><span class="n">stability_newton</span>
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="no-amplification">
<h2><span class="section-number">1.9. </span>No amplification<a class="headerlink" href="#no-amplification" title="Permalink to this headline">#</a></h2>
<p>In this example there is no accelerator effect in the model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.8 and accelerator = 0</strong></p>
<img alt="../../_images/bb095888cca2e951e5fc4db7147247b6932c4f3a2d53582fe37efeab7c2390b9.png" src="../../_images/bb095888cca2e951e5fc4db7147247b6932c4f3a2d53582fe37efeab7c2390b9.png" />
<img alt="../../_images/7157a96e147db193d2f4f1b8546e8b54140ed01f8b41e5e4795abcd2c45b3ac2.png" src="../../_images/7157a96e147db193d2f4f1b8546e8b54140ed01f8b41e5e4795abcd2c45b3ac2.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>0.0</td>
      <td>0.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>0.800000</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>0.707107</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="explosion">
<h2><span class="section-number">1.10. </span>Explosion<a class="headerlink" href="#explosion" title="Permalink to this headline">#</a></h2>
<p>In this version the model is unstable, the accelerator is greater than one and the multiplier large.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.9 and accelerator = 2</strong></p>
<img alt="../../_images/0893345379a22e3e403bc530375fab60493a40f1fc9426a1d6d4492f2cae8a51.png" src="../../_images/0893345379a22e3e403bc530375fab60493a40f1fc9426a1d6d4492f2cae8a51.png" />
<img alt="../../_images/e1004a3045df032ee011e40f1d225fad76776cdad692f01c282936cff1074a0b.png" src="../../_images/e1004a3045df032ee011e40f1d225fad76776cdad692f01c282936cff1074a0b.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.9</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-2.0</td>
      <td>2.7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-2.0</td>
      <td>1.8</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>1.500000</td>
      <td>1.200000</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.486664</td>
      <td>0.588348</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>0.811107</td>
      <td>0.784465</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>0.324443</td>
      <td>0.196116</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="exploding-oscillations">
<h2><span class="section-number">1.11. </span>Exploding oscillations<a class="headerlink" href="#exploding-oscillations" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.6 and accelerator = 2</strong></p>
<img alt="../../_images/4bb5b819bd1a45c5e3d7e95892e99619cdb43ad2a901098add5a6690eaae5eb1.png" src="../../_images/4bb5b819bd1a45c5e3d7e95892e99619cdb43ad2a901098add5a6690eaae5eb1.png" />
<img alt="../../_images/01a57702f3e3e18b07270d31f8d7e0d9f3f0eeb5bc8789eee91864327058de9b.png" src="../../_images/01a57702f3e3e18b07270d31f8d7e0d9f3f0eeb5bc8789eee91864327058de9b.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.6</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-2.0</td>
      <td>1.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-2.0</td>
      <td>1.2</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>0.900000+0.624500j</td>
      <td>0.900000-0.624500j</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>-0.345134+0.239485j</td>
      <td>-0.345134-0.239485j</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-0.766965+0.000000j</td>
      <td>-0.766965-0.000000j</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-0.421831-0.239485j</td>
      <td>-0.421831+0.239485j</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;modelnewton.newton_diff at 0x208497df8b0&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="perpetual-oscillations">
<h2><span class="section-number">1.12. </span>Perpetual oscillations<a class="headerlink" href="#perpetual-oscillations" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.5 and accelerator = 2</strong></p>
<img alt="../../_images/148760fe45fe66f4b438e00f1e2dd7786f596a2c1d0225bcb9e6ec6be7197ce0.png" src="../../_images/148760fe45fe66f4b438e00f1e2dd7786f596a2c1d0225bcb9e6ec6be7197ce0.png" />
<img alt="../../_images/c00832d7ff046b04c00dbef9561dac8724e71e9d16c9cfd96326c39fea32a7a3.png" src="../../_images/c00832d7ff046b04c00dbef9561dac8724e71e9d16c9cfd96326c39fea32a7a3.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-2.0</td>
      <td>1.5</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-2.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>0.750000+0.661438j</td>
      <td>0.750000-0.661438j</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>-0.283473+0.250000j</td>
      <td>-0.283473-0.250000j</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-0.755929+0.000000j</td>
      <td>-0.755929-0.000000j</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-0.472456-0.250000j</td>
      <td>-0.472456+0.250000j</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="dampened-oscillations">
<h2><span class="section-number">1.13. </span>Dampened oscillations<a class="headerlink" href="#dampened-oscillations" title="Permalink to this headline">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.7 and accelerator = 1</strong></p>
<img alt="../../_images/0fea8b096e470d3d4a09be1c0f73c440228d14e8cd77ca9598b88091c299653a.png" src="../../_images/0fea8b096e470d3d4a09be1c0f73c440228d14e8cd77ca9598b88091c299653a.png" />
<img alt="../../_images/3ce6482486c95231fd2a9b5a77c850dae70bb7cb769eb4510ee2838d013f865f.png" src="../../_images/3ce6482486c95231fd2a9b5a77c850dae70bb7cb769eb4510ee2838d013f865f.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.7</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-1.0</td>
      <td>1.4</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-1.0</td>
      <td>0.7</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>0.700000+0.458258j</td>
      <td>0.700000-0.458258j</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.494975-0.324037j</td>
      <td>0.494975+0.324037j</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>0.707107+0.000000j</td>
      <td>0.707107-0.000000j</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>0.212132+0.324037j</td>
      <td>0.212132-0.324037j</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="a-jackknife-procedure-to-attempt-to-the-contribution-of-each-equation-to-model-instability">
<h2><span class="section-number">1.14. </span>A Jackknife procedure to attempt to the contribution of each equation to model instability<a class="headerlink" href="#a-jackknife-procedure-to-attempt-to-the-contribution-of-each-equation-to-model-instability" title="Permalink to this headline">#</a></h2>
<p>The jackknife procedure systematically . This is done by deleting  the rows and columns for each equation and record the new eigenvalues.</p>
<p>The idea is to try to identify the equations which contributes most to the total eigenvalues.</p>
<p>The newton object returned above will also contains this operation. The <code class="docutils literal notranslate"><span class="pre">newton.get_eigen_jackknife_abs_select(year)</span></code> function will return the max absolute eigenvalue when for each equations is deleted. It also returns the eigenvalues when no equation is deleted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The terminology is loosely coined from Jackknife resampling https://en.wikipedia.org/wiki/Jackknife_resampling.</p>
<p>Contributions to better naming are very welcome.</p>
</div>
<section id="id1">
<h3><span class="section-number">1.14.1. </span><a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">newton</span> <span class="o">=</span> <span class="n">geteigen</span><span class="p">(</span><span class="n">mul</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">acc</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">show</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">newton</span><span class="o">.</span><span class="n">get_eigen_jackknife_abs_select</span><span class="p">(</span><span class="n">largest</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p><strong>Model where multiplier = 0.6 and accelerator = 2</strong></p>
<img alt="../../_images/4bb5b819bd1a45c5e3d7e95892e99619cdb43ad2a901098add5a6690eaae5eb1.png" src="../../_images/4bb5b819bd1a45c5e3d7e95892e99619cdb43ad2a901098add5a6690eaae5eb1.png" />
<img alt="../../_images/01a57702f3e3e18b07270d31f8d7e0d9f3f0eeb5bc8789eee91864327058de9b.png" src="../../_images/01a57702f3e3e18b07270d31f8d7e0d9f3f0eeb5bc8789eee91864327058de9b.png" />
<p><strong>Companion matrix</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CONSUMPTION(-1)</th>
      <th>GDP(-1)</th>
      <th>INVESTMENT(-1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>0.0</td>
      <td>0.6</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-2.0</td>
      <td>1.8</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-2.0</td>
      <td>1.2</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div><p><strong>Non zero eigenvalues and -vectors</strong></p>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Eigenvalues</th>
      <td>0.900000+0.624500j</td>
      <td>0.900000-0.624500j</td>
    </tr>
    <tr>
      <th>CONSUMPTION(-1)</th>
      <td>-0.345134+0.239485j</td>
      <td>-0.345134-0.239485j</td>
    </tr>
    <tr>
      <th>GDP(-1)</th>
      <td>-0.766965+0.000000j</td>
      <td>-0.766965-0.000000j</td>
    </tr>
    <tr>
      <th>INVESTMENT(-1)</th>
      <td>-0.421831-0.239485j</td>
      <td>-0.421831+0.239485j</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Calculating eigenvalues of 3  different matrices takes time, so make cup of coffee and a take a short nap
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "1ef2792ccbf14dc5a319dbd98ca56df5"}</script><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CONSUMPTION    0.00000
GDP            0.00000
INVESTMENT     0.60000
NONE           2.19089
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The output above shows that the largest eigenvalue of the system is 1.1. so the system is unstable. If either the consumption or  GDP equation is deleted the largest abs(eigenvalue)  will
be 0. So the system will not be unstable. The same goes in the Investment equation is excluded. However in this case the largest abs(eigenvalue) will be 0.6.</p>
<p>So for such a small model the procedure is not very useful. But for larger models it can help identifying rough equations.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\07_MoreFeatures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../06_ModelAnalytics/AttributionSomeFeatures.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Analyzing the impact of a shock</p>
      </div>
    </a>
    <a class="right-next"
       href="EigenValues.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Model eigenvalues</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-model">1.1. A model:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#normalized-form">1.1.1. normalized form</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-derivatives">1.2. The derivatives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-companion-matrix">1.3. The companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stability-and-the-eignvalues-of-the-companion-matrix">1.4. Stability and the eignvalues of the companion matrix</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-eigenvalues-and-eigenvectors-using-modelflow">1.5. Calculating Eigenvalues and eigenvectors using modelflow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-simple-samuleson-multiplier-accelerator-model">1.6. A simple Samuleson multiplier accelerator model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-generates-a-dataframe-with-values">1.7. A function which generates a dataframe with values</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-function-which-simulate-the-model-and-calculates-eigenvalues">1.8. A function which simulate the model and calculates eigenvalues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#no-amplification">1.9. No amplification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#explosion">1.10. Explosion</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploding-oscillations">1.11. Exploding oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perpetual-oscillations">1.12. Perpetual oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dampened-oscillations">1.13. Dampened oscillations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-jackknife-procedure-to-attempt-to-the-contribution-of-each-equation-to-model-instability">1.14. A Jackknife procedure to attempt to the contribution of each equation to model instability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.14.1. </a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Andrew Burns and Ib Hansen
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright World Bank. 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>