

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1. Model eigenvalues &#8212; The World Bank&#39;s MFMod Framework in Python with Modelflow</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script type="application/vnd.jupyter.widget-state+json">{"state": {"e6ee1a0136a34b229a2c68d0d781d235": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "62900042d89a402d9b071acb0158f454": {"model_name": "ProgressStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "a8fc8ecc5c6444bf8c112e319931f5ff": {"model_name": "FloatProgressModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_e6ee1a0136a34b229a2c68d0d781d235", "max": 303.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_62900042d89a402d9b071acb0158f454", "tabbable": null, "tooltip": null, "value": 303.0}}, "c560ab2118ae41eb8291cf05c08f33b9": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3db651b287b74e96b224de905d1f5b1b": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "d0bb40511c1443e4a258c7972d5d2e65": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_c560ab2118ae41eb8291cf05c08f33b9", "placeholder": "\u200b", "style": "IPY_MODEL_3db651b287b74e96b224de905d1f5b1b", "tabbable": null, "tooltip": null, "value": "100%"}}, "9e7e675524574c3694993d626252238e": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a9a8db9c35b74caf93a319e446771eb0": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "257af708d6fc402085c6c5686a5cb774": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_9e7e675524574c3694993d626252238e", "placeholder": "\u200b", "style": "IPY_MODEL_a9a8db9c35b74caf93a319e446771eb0", "tabbable": null, "tooltip": null, "value": " 303/303 [08:59&lt;00:00,  1.81s/it]"}}, "a50651f0f6e447df85ff7b2249224223": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "75502793cdf2415cab803962772dcc9c": {"model_name": "HBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_d0bb40511c1443e4a258c7972d5d2e65", "IPY_MODEL_a8fc8ecc5c6444bf8c112e319931f5ff", "IPY_MODEL_257af708d6fc402085c6c5686a5cb774"], "layout": "IPY_MODEL_a50651f0f6e447df85ff7b2249224223", "tabbable": null, "tooltip": null}}}, "version_major": 2, "version_minor": 0}</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script crossorigin="anonymous" data-jupyter-widgets-cdn="https://cdn.jsdelivr.net/npm/" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.6/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/07_MoreFeatures/EigenValues';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1. Getting Help" href="GettingHelp.html" />
    <link rel="prev" title="2. Analyzing the impact of a shock" href="../06_ModelAnalytics/AttributionSomeFeatures.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../introduction.html">
  
  
  
  
  
    <p class="title logo__title">The World Bank's MFMod Framework in Python with Modelflow</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../introduction.html">
                    Foreword
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">The World Bank's MFMod Framework and Modelflow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01_Introduction/Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_MacrostructuralModels/MacroStructuralModels.html">2. Macrostructural models</a></li>

<li class="toctree-l1 has-children"><a class="reference internal" href="../03_Installation/InstallingModelFlow.html">4. Installation of Modelflow</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/InstallingPython.html">4.1. Installation of Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/InstallingModelFlowpackage.html">4.2. Installation of  <code class="docutils literal notranslate"><span class="pre">Modelflow</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_Installation/UpdateModelFlow.html">4.3. Updating Modelflow</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Some python essentials for using World Bank models with modelflow</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/Intro_Jupyter_notebook.html">1. Introduction to  Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/PythonBasics.html">2. Some Python basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/PandasDataFrames.html">3. Introduction to Pandas, Pandas Series and Pandas dataframes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Selected modelflow extensions to pandas</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/Modelflow%20and%20Dataframes.html">1. Modelflow Extensions to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/UpdateCommand.html">2. <code class="docutils literal notranslate"><span class="pre">.upd()</span></code>  Return an updated dataframe</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_PythonEssentials/mfcalc.html">3. The .mfcalc() method a modelflow  extension of pandas</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using modelflow with World Bank models</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/AccessingWBModels.html">1. Using <code class="docutils literal notranslate"><span class="pre">modelflow</span></code> with World Bank models</a></li>

<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/WorkingwWBModels.html">3. Working with a World Bank Model under modelflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/ScenarioAnalysis.html">4. Scenario analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/MoreComplexScenarios.html">5. More complex scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/Targeting.html">6. A simulation that targets a specific outcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05_WBModels/ReportWriting.html">7. Report writing and scenario results</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Analytics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../06_ModelAnalytics/ModelStructure.html">1. Model analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06_ModelAnalytics/AttributionSomeFeatures.html">2. Analyzing the impact of a shock</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model Stability</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1. Model eigenvalues</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Technical how tos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="GettingHelp.html">1. Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="ModelFlowCommandReference.html">2. Modelflow methods reference</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Backmatter</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Reference.html">Reference</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/IbHansen/modelflow-manual/blob/main/papers/mfbook/content/07_MoreFeatures/EigenValues.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/IbHansen/modelflow-manual" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/07_MoreFeatures/EigenValues.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Model eigenvalues</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">1. Model eigenvalues</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-modelnewton">1.1. Import modelnewton</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-a-model-data-and-descriptions">1.2. Load a model, data and descriptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-method-newton-diff">1.3. the method .newton_diff()</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-eigenvalues-method">1.3.1. .get_eigenvalues method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-eigenplot-all-method">1.3.2. .get_eigenplot_all method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#isolating-potentially-problematic-eigenvalues">1.3.3. Isolating potentially problematic eigenvalues</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-all-years">1.3.4. Look at all years</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dealing-with-potential-instability">1.4. Dealing with potential instability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-get-eigen-jackknife-df-method">1.4.1. The <code class="docutils literal notranslate"><span class="pre">.get_eigen_jackknife_df()</span></code> method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-only-2-years">1.4.2. Look at only 2 years</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-structure-of-jackdf">1.4.3. The structure of jackdf</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-the-results-of-the-grid-search">1.5. Examining the results of the grid search</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-query-to-indicate-which-equations-when-deleted-have-unstable-eigenvalues">1.6. A query to indicate which equations, when deleted have unstable eigenvalues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifying-potentially-troublesome-equations">1.7. Identifying potentially troublesome equations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-the-eviews-equations-for-the-equations">1.8. Show the EViews equations for the equations.</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-the-modelflow-equations">1.9. Show the modelflow equations.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawing-conclusions-about-the-instability-in-the-model">2. Drawing conclusions about the instability in the model</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="model-eigenvalues">
<h1><span class="section-number">1. </span>Model eigenvalues<a class="headerlink" href="#model-eigenvalues" title="Permalink to this headline">#</a></h1>
<p>Eigenvalues are a fundamental concept in dynamic models. In simple terms, they summarize the adjustment process within a model. In the context of dynamic models, the sign and magnitude of the eigenvalues determine whether a system of equations will converge to a stable equilibrium, oscillate, or diverge.</p>
<p>In the case of a macromodel, which is effectively a system of differential equations, the eigenvalues of the coefficient matrix determine whether the system is stable, marginally stable, or unstable. If all the eigenvalues have negative real parts, then the system is stable and will converge to a steady state over time. If at least one eigenvalue has a positive real part, then the system is unstable, and the solutions will diverge over time.</p>
<p>The modelflow library includes a range of methods to calculate the eigenvalues of a model, which can be used to help to assure that a model’s dynamics will be stable and to identify sources of instability where they exist.</p>
<section id="import-modelnewton">
<h2><span class="section-number">1.1. </span>Import modelnewton<a class="headerlink" href="#import-modelnewton" title="Permalink to this headline">#</a></h2>
<p>To calculate eigenvectors and eigenvalues of a model requires thate the newton_diff package from the modelnewton library (part of the modelflow package) be imported.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import to handle imaginary numbers </span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 

<span class="c1"># Import of modelflow lineraization methods. </span>
<span class="kn">from</span> <span class="nn">modelnewton</span> <span class="kn">import</span> <span class="n">newton_diff</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="load-a-model-data-and-descriptions">
<h2><span class="section-number">1.2. </span>Load a model, data and descriptions<a class="headerlink" href="#load-a-model-data-and-descriptions" title="Permalink to this headline">#</a></h2>
<p>For the purposes of this exposition the climate aware model for Pakistan described <span id="id1"><a class="reference internal" href="../../Reference.html#id14" title="Andrew Burns, Charl Jooste, and Gregor Schwerhoff. Climate Modeling for Macroeconomic Policy : A Case Study for Pakistan. Number 9780 in Policy Research Working Papers. World Bank, Washington, DC, 2021. URL: https://openknowledge.worldbank.org/bitstream/handle/10986/36307/Climate-Modeling-for-Macroeconomic-Policy-A-Case-Study-for-Pakistan.pdf?sequence=1&amp;isAllowed=y.">Burns <em>et al.</em></a></span> is used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mpak</span><span class="p">,</span><span class="n">baseline</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">modelload</span><span class="p">(</span><span class="s1">&#39;../models/pak.pcim&#39;</span><span class="p">)</span>
<span class="n">baseline</span> <span class="o">=</span> <span class="n">mpak</span><span class="p">(</span><span class="n">baseline</span><span class="p">,</span><span class="mi">2023</span><span class="p">,</span><span class="mi">2100</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>file read:  C:\modelflow manual\papers\mfbook\content\models\pak.pcim
</pre></div>
</div>
</div>
</div>
<span class="target" id="index-0"></span><span class="target" id="index-1"></span><span class="target" id="index-2"></span><span class="target" id="index-3"></span></section>
<section id="the-method-newton-diff">
<span id="index-4"></span><h2><span class="section-number">1.3. </span>the method .newton_diff()<a class="headerlink" href="#the-method-newton-diff" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">modelnewton</span></code> method <code class="docutils literal notranslate"><span class="pre">.newtondiff()</span></code> calculates the derivatives of the mpak model, and in the code block belows assigns the results to the object mpak_newton.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mpak_newton_long</span> <span class="o">=</span> <span class="n">newton_diff</span><span class="p">(</span><span class="n">mpak</span><span class="p">,</span><span class="n">forcenum</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># create a newton_diff instance which contains derivatives </span>
</pre></div>
</div>
</div>
</div>
<span class="target" id="index-5"></span><section id="get-eigenvalues-method">
<span id="index-6"></span><h3><span class="section-number">1.3.1. </span>.get_eigenvalues method<a class="headerlink" href="#get-eigenvalues-method" title="Permalink to this headline">#</a></h3>
<p>The get_eigenvectors function calculates the actual eigenvectors of the model.  For a large model this can be a fairly time consuming calculation taking several minutes even on relatively powerful multicore i9 computers.</p>
<span class="target" id="index-7"></span><p id="index-8">Once the eigenvalues are calculated they can be displayed graphically with the <code class="docutils literal notranslate"><span class="pre">.eigplot_all()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eig_dic</span> <span class="o">=</span> <span class="n">mpak_newton_long</span><span class="o">.</span><span class="n">get_eigenvectors</span><span class="p">(</span><span class="n">filnan</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span><span class="n">silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">asdf</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1">#  </span>
</pre></div>
</div>
</div>
</div>
<span class="target" id="index-9"></span></section>
<section id="get-eigenplot-all-method">
<span id="index-10"></span><h3><span class="section-number">1.3.2. </span>.get_eigenplot_all method<a class="headerlink" href="#get-eigenplot-all-method" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.get_eigenplot_all()</span></code> method plots a polar diagram of the eigenvalues for a given year.  Eigenvalues with real roots are stable and will appear on the zero line. Ones unreal roots and values in excess of 1 are unstable.</p>
<p>Inspection of the polar diagrams reveals indicates that most of the eigenvalues are less than one, and that those that have unreal roots (those that appear off of the 0 degree line), only a few have imaginary roots outside of the unit circle which could be a source of model uncertainty (these are hard to see in the figure, but are identified below).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mpak_newton_long</span><span class="o">.</span><span class="n">eigplot_all</span><span class="p">(</span><span class="n">eig_dic</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">maxfig</span><span class="o">=</span><span class="mi">4</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/229103b4c8ef486d8ca584c5e2e2935d9b17e922e764ab1269a2c27b9ee6ff11.png" src="../../_images/229103b4c8ef486d8ca584c5e2e2935d9b17e922e764ab1269a2c27b9ee6ff11.png" />
</div>
</div>
</section>
<section id="isolating-potentially-problematic-eigenvalues">
<h3><span class="section-number">1.3.3. </span>Isolating potentially problematic eigenvalues<a class="headerlink" href="#isolating-potentially-problematic-eigenvalues" title="Permalink to this headline">#</a></h3>
<p>In the charts above it is clear that the vast majority of eigenvalues lie within the real unit circle and or have real roots, implying that the associated equations are dynamically stable.</p>
<p>However, there are several that lie outside of the unit circle. The code below identifies and prints out those elements whose eigenvalues are greater than one in 2023, and in particular those with imaginary roots – a source of instability.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eigen</span> <span class="o">=</span> <span class="n">eig_dic</span><span class="p">[</span><span class="mi">2023</span><span class="p">]</span>
<span class="n">gt1_no_imag</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([(</span><span class="n">ii</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>  <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eigen</span><span class="p">)</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.0000000001</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">gt1_imag</span>    <span class="o">=</span> <span class="nb">sorted</span><span class="p">([(</span><span class="n">ii</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>  <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">eigen</span><span class="p">)</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">&gt;</span>  <span class="mf">0.00000001</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Eigenvalues with length above 1 and only real: &#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;element </span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s1"> length: </span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="si">:</span><span class="s1">.5f</span><span class="si">}</span><span class="s1"> &#39;</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">gt1_no_imag</span><span class="p">],</span><span class="s1">&#39;  &#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Eigenvalues with length above 1 and imaginary: &#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;element </span><span class="si">{</span><span class="n">ii</span><span class="si">}</span><span class="s1"> length: </span><span class="si">{</span><span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="si">:</span><span class="s1">.5f</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">real</span><span class="si">:</span><span class="s1">.5f</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">imag</span><span class="si">:</span><span class="s1">.5f</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">ii</span><span class="p">,</span><span class="n">i</span> <span class="ow">in</span> <span class="n">gt1_imag</span><span class="p">],</span><span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Eigenvalues with length above 1 and only real: 
element 1499 length: 1.02441 
element 1419 length: 1.02000 
element 1325 length: 1.06952 
element 1324 length: 1.06998 
element 1323 length: 1.06368 
element 1320 length: 1.00287 
element 1319 length: 1.06036 
element 1316 length: 1.08554 
element 1307 length: 1.09349 
element 1304 length: 1.12010 
element 1291 length: 1.12521 
element 535 length: 1.00816 
element 495 length: 1.02299 
element 494 length: 1.13663 
element 456 length: 1.09513 
element 455 length: 1.09868 
  
Eigenvalues with length above 1 and imaginary: 
element 1315 length: 1.00303 1.00282 -0.02085
element 1314 length: 1.00303 1.00282 0.02085
</pre></div>
</div>
</div>
</div>
<p>These results that 16 eigenvalues exceed 1 and that two exceed one and have imaginary roots.</p>
</section>
<section id="look-at-all-years">
<h3><span class="section-number">1.3.4. </span>Look at all years<a class="headerlink" href="#look-at-all-years" title="Permalink to this headline">#</a></h3>
<p>The above routine was run for a single year, the code below can be run for multiple years.  Model data could cause an eigenvalue that was stable in one year to become unstable in another year.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_eigenvalues_summary</span><span class="p">(</span><span class="n">eig_dic</span><span class="p">,</span> <span class="n">print_all</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Prints a summary of eigenvalues with length &gt; 1 </span>

<span class="sd">    Args:</span>
<span class="sd">    eig_dic (dict): A dictionary where keys are years and values are lists of eigenvalues.</span>
<span class="sd">    print_all (bool): If True, prints all years. If False, only prints years with non-zero imaginary eigenvalues.</span>

<span class="sd">    Returns:</span>
<span class="sd">    None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">length_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">year</span><span class="p">:</span> 
        <span class="p">{</span><span class="s1">&#39;lgt1_no_imag&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eigen</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.0000000001</span><span class="p">]),</span>
         <span class="s1">&#39;gt1_imag&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">eigen</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">imag</span> <span class="o">&gt;</span> <span class="mf">0.00000001</span><span class="p">])}</span> 
        <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">eigen</span> <span class="ow">in</span> <span class="n">eig_dic</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Eigenvalues with length &gt;= 1&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">length_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">print_all</span> <span class="ow">or</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;gt1_imag&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">real_values</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;lgt1_no_imag&quot;</span><span class="p">]</span>
            <span class="n">imag_values</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;gt1_imag&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;gt1_imag&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s1"> With real values </span><span class="si">{</span><span class="n">real_values</span><span class="si">}</span><span class="s1">, with imaginary values </span><span class="si">{</span><span class="n">imag_values</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>


<span class="n">print_eigenvalues_summary</span><span class="p">(</span><span class="n">eig_dic</span><span class="p">,</span> <span class="n">print_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Eigenvalues with length &gt;= 1
2023 With real values 16, with imaginary values 1
2031 With real values 15, with imaginary values 1
2053 With real values 15, with imaginary values 1
2054 With real values 16, with imaginary values 1
2055 With real values 15, with imaginary values 1
2056 With real values 16, with imaginary values 1
2057 With real values 16, with imaginary values 1
2058 With real values 16, with imaginary values 1
2059 With real values 16, with imaginary values 1
2062 With real values 18, with imaginary values 1
2063 With real values 18, with imaginary values 1
2064 With real values 17, with imaginary values 1
2092 With real values 17, with imaginary values 1
2094 With real values 17, with imaginary values 1
2098 With real values 16, with imaginary values 1
2100 With real values 16, with imaginary values 1
</pre></div>
</div>
</div>
</div>
<p>It appears that for the Pakistan model, over many years there is only one eigenvalue that is in excess of one and has imaginary roots.</p>
</section>
</section>
<section id="dealing-with-potential-instability">
<h2><span class="section-number">1.4. </span>Dealing with potential instability<a class="headerlink" href="#dealing-with-potential-instability" title="Permalink to this headline">#</a></h2>
<p>Unfortunately there is no one-to-one relationship between equations and eigenvalues. It may be that certain equations are inherently unstable, error-correction models where the speed of adjustment is greater than one for example.  Equation results can be inspected for such sources of instability.</p>
<p>Other sources of instability may be more subtle and lie in the interaction of coefficients across equations.  One approach to identifying potentially problematic equations is to perform a grid-search by recalculating the eigenvalues of the system after eliminating one equation, and repeating this operation for every equation in the system.</p>
<p>The elimination of an ill-formed equation is likely to cause large and greater than one eigenvalues to shrink and potentially even fall within the unit circle and may cause eigenvalues with imaginary roots to disappear. Such a reaction would seem to indicate that the excluded equation lies within the nexus of relationships that are generating potential instability. It is of course possible that several equations lie within the same nexus and have the same effect when eliminated of getting rid of the unstable eigenvector.</p>
<span class="target" id="index-11"></span><span class="target" id="index-12"></span><section id="the-get-eigen-jackknife-df-method">
<span id="index-13"></span><h3><span class="section-number">1.4.1. </span>The <code class="docutils literal notranslate"><span class="pre">.get_eigen_jackknife_df()</span></code> method<a class="headerlink" href="#the-get-eigen-jackknife-df-method" title="Permalink to this headline">#</a></h3>
<p>Modelflow includes a jackknife algorithm (<code class="docutils literal notranslate"><span class="pre">.get_eigen_jackknife_df()</span></code>) that systematically drops one-by-one each equation from the model, and then recalculates the eigenvalues of the smaller model. The  eigenvalues for each new model (each comprised of the one less than the N equations of the original model) are returned as a tall or stacked dataframe.</p>
<p>The routine sums the 20 largest eigenvalues each time an equation is omitted.  By keeping track of the size of the largest eigenvalues, the algorithm seeks to identify one (or more) equations that have a large influence on the eigenvalues of the system.</p>
<p>Equations whose omission from the model reduces the largest eigenvalues the most are most likely to be the source of model instability.</p>
<p>For a large model, this can be a time-consuming exercise (7-12 minutes for mpak over two years, depending on the user’s processor).</p>
<p>To test code, the parameter maxnames can be set to restrict the number of re-samplings.</p>
</section>
<section id="look-at-only-2-years">
<h3><span class="section-number">1.4.2. </span>Look at only 2 years<a class="headerlink" href="#look-at-only-2-years" title="Permalink to this headline">#</a></h3>
<p>For the sake of execution time a new mpak_newton is created with only 2 years.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <span class="n">mpak</span><span class="p">(</span><span class="n">baseline</span><span class="p">,</span><span class="mi">2023</span><span class="p">,</span><span class="mi">2024</span><span class="p">)</span>
<span class="n">mpak_newton</span> <span class="o">=</span> <span class="n">newton_diff</span><span class="p">(</span><span class="n">mpak</span><span class="p">,</span><span class="n">forcenum</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># create a newton_diff instance which contains derivatives for 2023 and 2024</span>
<span class="c1"># eig_dic_short = mpak_newton.get_eigenvectors(filnan = True,silent=False,asdf=1) #  </span>
</pre></div>
</div>
</div>
</div>
<p>Below the <code class="docutils literal notranslate"><span class="pre">get_eigen_jackknife</span></code> routine systematically calcualtes the eigenvalue of 303 different versions of the model, the original model and then 302 models equal to the original model less one equation.  This is a time consuming exercise on a model the size of mpak.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jackdf</span>  <span class="o">=</span> <span class="n">mpak_newton</span><span class="o">.</span><span class="n">get_eigen_jackknife_df</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Calculating eigenvalues of 303  different matrices takes time, so make cup of coffee and a take a short nap
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "75502793cdf2415cab803962772dcc9c"}</script></div>
</div>
</section>
<section id="the-structure-of-jackdf">
<h3><span class="section-number">1.4.3. </span>The structure of jackdf<a class="headerlink" href="#the-structure-of-jackdf" title="Permalink to this headline">#</a></h3>
<p>The dataframe returned by the routine contains a stacked (tall) dataframe showing the all the eigenvalue, and their assocaited levels length, real and imaginary values for each variant of the model.  The excluded column indicates what equation was excluded and the exclude description gives a more verbose indication of the change.  The first set of eigenvalues are for the whole model and the last are for the model when the last equation () is excluded.</p>
<p>The returned  dataframe has the following columns:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-left head"><p>Column</p></th>
<th class="text-left head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>excluded</p></td>
<td class="text-left"><p>The name or identifier of the excluded variable.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>year</p></td>
<td class="text-left"><p>The year associated with the data row.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>index</p></td>
<td class="text-left"><p>The index or position of the row in the dataset.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>value</p></td>
<td class="text-left"><p>The computed or observed value for the row.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>length</p></td>
<td class="text-left"><p>The absolute length or magnitude of the <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>realvalue</p></td>
<td class="text-left"><p>The real part of the <code class="docutils literal notranslate"><span class="pre">value</span></code> if it’s complex.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>imagvalue</p></td>
<td class="text-left"><p>The imaginary part of the <code class="docutils literal notranslate"><span class="pre">value</span></code> if it’s complex.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>excluded_description</p></td>
<td class="text-left"><p>The description of the variable for which the equation is excluded</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jackdf</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1"># The first 5 rows of the returned dataframe</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>excluded</th>
      <th>year</th>
      <th>index</th>
      <th>value</th>
      <th>length</th>
      <th>realvalue</th>
      <th>imagvalue</th>
      <th>excluded_description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NONE</td>
      <td>2023</td>
      <td>0</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NONE</td>
      <td>2023</td>
      <td>1</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NONE</td>
      <td>2023</td>
      <td>2</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NONE</td>
      <td>2023</td>
      <td>3</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NONE</td>
      <td>2023</td>
      <td>4</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>whole model</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jackdf</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="c1"># The final 5 rows of the returned dataframe (note these are for year 2004 vs 2003 at the beginning)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>excluded</th>
      <th>year</th>
      <th>index</th>
      <th>value</th>
      <th>length</th>
      <th>realvalue</th>
      <th>imagvalue</th>
      <th>excluded_description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>916867</th>
      <td>TURPCEXN05</td>
      <td>2024</td>
      <td>1503</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>TURPCEXN05</td>
    </tr>
    <tr>
      <th>916868</th>
      <td>TURPCEXN05</td>
      <td>2024</td>
      <td>1504</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>TURPCEXN05</td>
    </tr>
    <tr>
      <th>916869</th>
      <td>TURPCEXN05</td>
      <td>2024</td>
      <td>1505</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>TURPCEXN05</td>
    </tr>
    <tr>
      <th>916870</th>
      <td>TURPCEXN05</td>
      <td>2024</td>
      <td>1506</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>TURPCEXN05</td>
    </tr>
    <tr>
      <th>916871</th>
      <td>TURPCEXN05</td>
      <td>2024</td>
      <td>1507</td>
      <td>0.0+0.0j</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>TURPCEXN05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section id="examining-the-results-of-the-grid-search">
<h2><span class="section-number">1.5. </span>Examining the results of the grid search<a class="headerlink" href="#examining-the-results-of-the-grid-search" title="Permalink to this headline">#</a></h2>
<p>The query command return all rows from the dataframe that match a specific criteria.</p>
<p>In the example below, returns all rows where excluded is = NONE (i.e.where no variable was excluded) <strong>and</strong> the absolute value of the imaginary number of the eigenvector is not 0 <strong>and</strong> the year is 2003.</p>
<p>As it turns out, there is only one eigenvalue with length greater than one and  and imaginary value different from 0 (recall imaginary values always return in pairs: a positive number and the numerically identical  negative number).</p>
<p>i.e. the eigenvectors with value greater than one and imaginary roots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jackdf</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;excluded ==&quot;NONE&quot; &amp; length &gt; 1 &amp; abs(imagvalue) != 0.0 &amp;  year == 2023&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>excluded</th>
      <th>year</th>
      <th>index</th>
      <th>value</th>
      <th>length</th>
      <th>realvalue</th>
      <th>imagvalue</th>
      <th>excluded_description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1316</th>
      <td>NONE</td>
      <td>2023</td>
      <td>1316</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>1317</th>
      <td>NONE</td>
      <td>2023</td>
      <td>1317</td>
      <td>1.002817-0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>-0.020852</td>
      <td>whole model</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="a-query-to-indicate-which-equations-when-deleted-have-unstable-eigenvalues">
<h2><span class="section-number">1.6. </span>A query to indicate which equations, when deleted have unstable eigenvalues<a class="headerlink" href="#a-query-to-indicate-which-equations-when-deleted-have-unstable-eigenvalues" title="Permalink to this headline">#</a></h2>
<p>Apparently for 285 equations the model in 2023 is still unstable if the equations are deleted, implying that for 303-285=18 sub-models when one equation was deleted there were no unstable eigenvalues.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">jackdf</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;length &gt; 1 &amp; imagvalue &gt; 0.0 &amp;  year == 2023&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>excluded</th>
      <th>year</th>
      <th>index</th>
      <th>value</th>
      <th>length</th>
      <th>realvalue</th>
      <th>imagvalue</th>
      <th>excluded_description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1316</th>
      <td>NONE</td>
      <td>2023</td>
      <td>1316</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>whole model</td>
    </tr>
    <tr>
      <th>4343</th>
      <td>CHNEXR05</td>
      <td>2023</td>
      <td>1319</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>CHNEXR05</td>
    </tr>
    <tr>
      <th>7363</th>
      <td>CHNPCEXN05</td>
      <td>2023</td>
      <td>1323</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>CHNPCEXN05</td>
    </tr>
    <tr>
      <th>10379</th>
      <td>DEUEXR05</td>
      <td>2023</td>
      <td>1323</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>DEUEXR05</td>
    </tr>
    <tr>
      <th>13392</th>
      <td>DEUPCEXN05</td>
      <td>2023</td>
      <td>1320</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>DEUPCEXN05</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>903110</th>
      <td>PAKWHSLINTKN</td>
      <td>2023</td>
      <td>1318</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>PAKWHSLINTKN</td>
    </tr>
    <tr>
      <th>906115</th>
      <td>PAKXMKT</td>
      <td>2023</td>
      <td>1307</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>PAKXMKT Weighted Trading Partner Demand</td>
    </tr>
    <tr>
      <th>909130</th>
      <td>PAKXMKT_GR</td>
      <td>2023</td>
      <td>1306</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>PAKXMKT_GR</td>
    </tr>
    <tr>
      <th>912146</th>
      <td>TUREXR05</td>
      <td>2023</td>
      <td>1306</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>TUREXR05</td>
    </tr>
    <tr>
      <th>915162</th>
      <td>TURPCEXN05</td>
      <td>2023</td>
      <td>1306</td>
      <td>1.002817+0.020852j</td>
      <td>1.003034</td>
      <td>1.002817</td>
      <td>0.020852</td>
      <td>TURPCEXN05</td>
    </tr>
  </tbody>
</table>
<p>287 rows × 8 columns</p>
</div></div></div>
</div>
</section>
<section id="identifying-potentially-troublesome-equations">
<h2><span class="section-number">1.7. </span>Identifying potentially troublesome equations<a class="headerlink" href="#identifying-potentially-troublesome-equations" title="Permalink to this headline">#</a></h2>
<p>To identify potentially troublesome equations we interrogate the database for submodels, which when a specific equations is omitted no-longer have eigenvalues greater than one that also have imaginary roots.</p>
<p>Effectively if, when an equation is excluded from the model, the truncated model has no eigenvalue outside the unit root with imaginary roots – that suggests quite strongly that the excluded equation plays is playing a part in the instability of the model.</p>
<p>The procedure below goes through the tall dataframe and returns only those rows where no eigenvalue for the group identified by the excluded variable has an eigenavlue &gt;1 and imaginary roots.  For these variables exclusion of its equation eliminated the instability in the residual model.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_unique_excluded</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">excluded_col</span><span class="o">=</span><span class="s1">&#39;excluded&#39;</span><span class="p">,</span> <span class="n">description_col</span><span class="o">=</span><span class="s1">&#39;excluded_description&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Filters the DataFrame for a specific year and returns unique values of &#39;excluded&#39; and their descriptions,</span>
<span class="sd">    where no row in the group satisfies both conditions (length &gt; 1 and imagvalue &gt; 0).</span>

<span class="sd">    Args:</span>
<span class="sd">    df (pandas.DataFrame): The DataFrame to process.</span>
<span class="sd">    year (int): The year to filter the DataFrame.</span>
<span class="sd">    excluded_col (str): The name of the column containing excluded variables. Default is &#39;excluded&#39;.</span>
<span class="sd">    description_col (str): The name of the column containing descriptions of excluded variables. Default is &#39;excluded_description&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">    tuple: A tuple containing two arrays - unique excluded descriptions and unique excluded variables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Filter DataFrame for the specified year and apply the conditions</span>
    <span class="n">filtered_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;year == @year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">excluded_col</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="o">~</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;length&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;imagvalue&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
    <span class="p">)</span>

    <span class="c1"># Extract unique values</span>
    <span class="n">unique_descriptions</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="p">[</span><span class="n">description_col</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="n">unique_variables</span> <span class="o">=</span> <span class="n">filtered_df</span><span class="p">[</span><span class="n">excluded_col</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">unique_descriptions</span><span class="p">,</span> <span class="n">unique_variables</span>

<span class="n">unique_excluded_descriptions</span><span class="p">,</span> <span class="n">unique_excluded_variables</span> <span class="o">=</span> <span class="n">get_unique_excluded</span><span class="p">(</span><span class="n">jackdf</span><span class="p">,</span> <span class="mi">2023</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unique_excluded_descriptions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;PAKGGDBTTOTLCN General government gross debt millions lcu&#39;
 &#39;PAKGGEXPCAPTCN General government expenditure on capital expenditure (millions lcu)&#39;
 &#39;PAKGGEXPINTPCN General government interest payments on public debt (millions lcu)&#39;
 &#39;PAKGGREVTOTLCN General government revenues, total (millions lcu)&#39;
 &#39;PAKNECONGOVTCN Govt. Cons., LCU mn&#39; &#39;PAKNECONGOVTKN Gov. Cons real&#39;
 &#39;PAKNECONOTHRXN&#39; &#39;PAKNECONPRVTCN Pvt. Cons., LCU mn&#39;
 &#39;PAKNECONPRVTXN Implicit LCU defl., Pvt. Cons., 2000 = 1&#39;
 &#39;PAKNEGDIFPRVKN Prvt. Investment real&#39; &#39;PAKNEGDIFTOTKN Investment real&#39;
 &#39;PAKNEGDIFTOTKN2&#39; &#39;PAKNEGDIKSTKKN Capital stock, LCU&#39;
 &#39;PAKNYGDPFCSTXN GDP Factor Cost Local Currency units Implicit Price deflator&#39;
 &#39;PAKNYGDPGAP_ Output Gap (% of Potential GDP)&#39;
 &#39;PAKNYGDPMKTPCN GDP, Market Prices, LCU mn&#39;
 &#39;PAKNYGDPPOTLKN Potential Output, constant LCU&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="show-the-eviews-equations-for-the-equations">
<h2><span class="section-number">1.8. </span>Show the EViews equations for the equations.<a class="headerlink" href="#show-the-eviews-equations-for-the-equations" title="Permalink to this headline">#</a></h2>
<p>Now that a list of potentially problematic equations has been extracted from the model, their equations can be examined for any obvious factors that might be de-stabilizing, such as a speed of adjustment in an ECM equation that was negative or greater than 2.</p>
<p>For World Bank models the equations are usually easier to read in their estimated form, which can be extracted by passing a space-delimited string of the mnemonics of the selected variables to the the eviews command.</p>
<p>A quick inspection reveals no obvious candidates for an equation that is itself inherently unstable.</p>
<p>However, the levels of  several equations are not constrained in several instances, which means they could be unstable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">string_of_excluded_variables</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unique_excluded_variables</span><span class="p">)</span>
<span class="n">mpak</span><span class="p">[</span><span class="n">string_of_excluded_variables</span><span class="p">]</span><span class="o">.</span><span class="n">eviews</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PAKGGDBTTOTLCN  : PAKGGDBTTOTLCN = PAKGGDBTTOTLCN( - 1) - PAKGGBALOVRLCN + PAKGGDBTVALTCN + 0*DUMH
PAKGGEXPCAPTCN  : PAKGGEXPCAPTCN = 0.3*PAKGGEXPCAPTCN( - 1) + (1 - 0.3)*(0.37*(PAKGGREVTOTLCN - PAKGGEXPINTPCN( - 0))) + 393385.011*@DURING(&quot;2013&quot;)
PAKGGEXPINTPCN  : @IDENTITY PAKggexpintpcn  = PAKggexpintecn  + PAKggexpintdcn
PAKGGREVTOTLCN  : @IDENTITY PAKGGREVTOTLCN  = (PAKGGREVOTHRCN  + PAKGGREVDRCTCN  + PAKGGREVGRNTCN  + PAKGGREVGNFSCN  + PAKGGREVTRDECN  + PAKGGREVEMISCN)  + (PAKinsu  + PAKcofu)  * PAKPAYOUTCN
PAKNECONGOVTCN  : @PC(PAKNECONGOVTCN) = @PC(PAKGGEXPGNFSCN) + 0.764199817873939*DUMH
PAKNECONGOVTKN  : @IDENTITY PAKNEcongovtkn  = PAKNEcongovtcn  / PAKNEcongovtxn
PAKNECONOTHRXN  : DLOG(PAKNECONOTHRXN) = 0.590372627657176*DLOG(PAKNYGDPFCSTXN) + D(PAKGGREVGNFSXN/100) + (1 - 0.590372627657176)*DLOG(PAKNEIMPGNFSXN) + 0.2*PAKNYGDPGAP_/100
PAKNECONPRVTCN  : @IDENTITY PAKNECONPRVTCN  = PAKNECONPRVTKN  * PAKNECONPRVTXN
PAKNECONPRVTXN  : @IDENTITY PAKNECONPRVTXN  = ((PAKNECONENGYSH^PAKCESENGYCON)  * PAKNECONENGYXN^(1  - PAKCESENGYCON)  + (PAKNECONOTHRSH^PAKCESENGYCON)  * PAKNECONOTHRXN^(1  - PAKCESENGYCON))^(1  / (1  - PAKCESENGYCON))
PAKNEGDIFPRVKN  : (PAKNEGDIFPRVKN/PAKNEGDIKSTKKN( - 1)) = 0.00212272413966296 + 0.970234989019907*(PAKNEGDIFPRVKN( - 1)/PAKNEGDIKSTKKN( - 2)) + (1 - 0.970234989019907)*(DLOG(PAKNYGDPPOTLKN) + PAKDEPR) + 0.0525240494260597*DLOG(PAKNEKRTTOTLCN/PAKNYGDPFCSTXN)
PAKNEGDIFTOTKN  : @IDENTITY PAKNEGDIFTOTKN  = PAKNEGDIFGOVKN  + PAKNEGDIFPRVKN
PAKNEGDIFTOTKN2 : @IDENTITY PAKNEGDIFTOTKN2  = PAKNEGDIFTOTKN  + PAKRECOVINVESTKN
PAKNEGDIKSTKKN  : @IDENTITY PAKNEGDIKSTKKN  = (PAKNEGDIKSTKKN(-1)  * (1  - PAKDEPR))  + PAKNEGDIFTOTKN2  - 2  * PAKHURDAMKN
PAKNYGDPFCSTXN  : DLOG(PAKNYGDPFCSTXN) = 0.6*DLOG(PAKNYGDPFCSTXN( - 1)) + (1 - 0.6)*(0.7*PAKINFLEXPT/100 + (1 - 0.7)*DLOG(PAKPSTAR( - 1))) + 0.0935726784287011*PAKNYGDPGAP_/100
PAKNYGDPGAP_    : @IDENTITY PAKNYGDPGAP_  = ((PAKnyGDPMKTPKN  / PAKNYGDPPOTLKN  - 1)  * 100)
PAKNYGDPMKTPCN  : @IDENTITY PAKNYGDPMKTPCN  = PAKNECONPRVTCN  + PAKNECONGOVTCN  + PAKNEGDIFTOTCN  + PAKNEGDISTKBCN  + PAKNEEXPGNFSCN  - PAKNEIMPGNFSCN  + PAKNYGDPDISCCN  + PAKadap  * PAKDISPREPCN
PAKNYGDPPOTLKN  : @IDENTITY PAKNYGDPPOTLKN  = PAKNYGDPTFP  * (PAKLMEMPSTRLCN^PAKNYYWBTOTLCN_)  * (PAKNEGDIKSTKKN(-1)^(1  - PAKNYYWBTOTLCN_  - 0.1))  * (PAKNVENGTOTLKN^0.1)
</pre></div>
</div>
</div>
</div>
</section>
<section id="show-the-modelflow-equations">
<h2><span class="section-number">1.9. </span>Show the modelflow equations.<a class="headerlink" href="#show-the-modelflow-equations" title="Permalink to this headline">#</a></h2>
<p>The equations can also be inspected in their normalized level form.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mpak</span><span class="p">[</span><span class="n">string_of_excluded_variables</span><span class="p">]</span><span class="o">.</span><span class="n">frml</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>PAKGGDBTTOTLCN  : FRML &lt;DAMP,STOC&gt; PAKGGDBTTOTLCN = (PAKGGDBTTOTLCN(-1)-PAKGGBALOVRLCN+PAKGGDBTVALTCN+0*DUMH + PAKGGDBTTOTLCN_A)* (1-PAKGGDBTTOTLCN_D)+ PAKGGDBTTOTLCN_X*PAKGGDBTTOTLCN_D $
PAKGGEXPCAPTCN  : FRML &lt;DAMP,STOC&gt; PAKGGEXPCAPTCN = (0.3*PAKGGEXPCAPTCN(-1)+(1-0.3)*(0.37*(PAKGGREVTOTLCN-PAKGGEXPINTPCN(-0)))+393385.011*DURING_2013 + PAKGGEXPCAPTCN_A)* (1-PAKGGEXPCAPTCN_D)+ PAKGGEXPCAPTCN_X*PAKGGEXPCAPTCN_D $
PAKGGEXPINTPCN  : FRML &lt;IDENT&gt; PAKGGEXPINTPCN = PAKGGEXPINTECN+PAKGGEXPINTDCN $
PAKGGREVTOTLCN  : FRML &lt;IDENT&gt; PAKGGREVTOTLCN = (PAKGGREVOTHRCN+PAKGGREVDRCTCN+PAKGGREVGRNTCN+PAKGGREVGNFSCN+PAKGGREVTRDECN+PAKGGREVEMISCN)+(PAKINSU+PAKCOFU)*PAKPAYOUTCN $
PAKNECONGOVTCN  : FRML &lt;DAMP,STOC&gt; PAKNECONGOVTCN = (PAKNECONGOVTCN_A*PAKNECONGOVTCN(-1)/100+ ((100 * ( (PAKGGEXPGNFSCN) / (PAKGGEXPGNFSCN(-1)) -1)) +0.764199817873939*DUMH) *PAKNECONGOVTCN(-1)/100+PAKNECONGOVTCN(-1)) * (1-PAKNECONGOVTCN_D)+ PAKNECONGOVTCN_X*PAKNECONGOVTCN_D $
PAKNECONGOVTKN  : FRML &lt;IDENT&gt; PAKNECONGOVTKN = PAKNECONGOVTCN/PAKNECONGOVTXN $
PAKNECONOTHRXN  : FRML &lt;DAMP,STOC&gt; PAKNECONOTHRXN = (PAKNECONOTHRXN(-1)*EXP(PAKNECONOTHRXN_A+ (0.590372627657176*((LOG(PAKNYGDPFCSTXN))-(LOG(PAKNYGDPFCSTXN(-1))))+((PAKGGREVGNFSXN/100)-(PAKGGREVGNFSXN(-1)/100))+(1-0.590372627657176)*((LOG(PAKNEIMPGNFSXN))-(LOG(PAKNEIMPGNFSXN(-1))))+0.2*PAKNYGDPGAP_/100) )) * (1-PAKNECONOTHRXN_D)+ PAKNECONOTHRXN_X*PAKNECONOTHRXN_D $
PAKNECONPRVTCN  : FRML &lt;IDENT&gt; PAKNECONPRVTCN = PAKNECONPRVTKN*PAKNECONPRVTXN $
PAKNECONPRVTXN  : FRML &lt;IDENT&gt; PAKNECONPRVTXN = ((PAKNECONENGYSH**PAKCESENGYCON)*PAKNECONENGYXN**(1-PAKCESENGYCON)+(PAKNECONOTHRSH**PAKCESENGYCON)*PAKNECONOTHRXN**(1-PAKCESENGYCON))**(1/(1-PAKCESENGYCON)) $
PAKNEGDIFPRVKN  : FRML &lt;DAMP,STOC&gt; PAKNEGDIFPRVKN = (PAKNEGDIFPRVKN_A*PAKNEGDIKSTKKN(-1)+ (0.00212272413966296+0.970234989019907*(PAKNEGDIFPRVKN(-1)/PAKNEGDIKSTKKN(-2))+(1-0.970234989019907)*(((LOG(PAKNYGDPPOTLKN))-(LOG(PAKNYGDPPOTLKN(-1))))+PAKDEPR)+0.0525240494260597*((LOG(PAKNEKRTTOTLCN/PAKNYGDPFCSTXN))-(LOG(PAKNEKRTTOTLCN(-1)/PAKNYGDPFCSTXN(-1))))) *PAKNEGDIKSTKKN(-1)) * (1-PAKNEGDIFPRVKN_D)+ PAKNEGDIFPRVKN_X*PAKNEGDIFPRVKN_D $
PAKNEGDIFTOTKN  : FRML &lt;IDENT&gt; PAKNEGDIFTOTKN = PAKNEGDIFGOVKN+PAKNEGDIFPRVKN $
PAKNEGDIFTOTKN2 : FRML &lt;IDENT&gt; PAKNEGDIFTOTKN2 = PAKNEGDIFTOTKN+PAKRECOVINVESTKN $
PAKNEGDIKSTKKN  : FRML &lt;IDENT&gt; PAKNEGDIKSTKKN = (PAKNEGDIKSTKKN(-1)*(1-PAKDEPR))+PAKNEGDIFTOTKN2-2*PAKHURDAMKN $
PAKNYGDPFCSTXN  : FRML &lt;DAMP,STOC&gt; PAKNYGDPFCSTXN = (PAKNYGDPFCSTXN(-1)*EXP(PAKNYGDPFCSTXN_A+ (0.6*((LOG(PAKNYGDPFCSTXN(-1)))-(LOG(PAKNYGDPFCSTXN(-2))))+(1-0.6)*(0.7*PAKINFLEXPT/100+(1-0.7)*((LOG(PAKPSTAR(-1)))-(LOG(PAKPSTAR(-2)))))+0.0935726784287011*PAKNYGDPGAP_/100) )) * (1-PAKNYGDPFCSTXN_D)+ PAKNYGDPFCSTXN_X*PAKNYGDPFCSTXN_D $
PAKNYGDPGAP_    : FRML &lt;IDENT&gt; PAKNYGDPGAP_ = ((PAKNYGDPMKTPKN/PAKNYGDPPOTLKN-1)*100) $
PAKNYGDPMKTPCN  : FRML &lt;IDENT&gt; PAKNYGDPMKTPCN = PAKNECONPRVTCN+PAKNECONGOVTCN+PAKNEGDIFTOTCN+PAKNEGDISTKBCN+PAKNEEXPGNFSCN-PAKNEIMPGNFSCN+PAKNYGDPDISCCN+PAKADAP*PAKDISPREPCN $
PAKNYGDPPOTLKN  : FRML &lt;IDENT&gt; PAKNYGDPPOTLKN = PAKNYGDPTFP*(PAKLMEMPSTRLCN**PAKNYYWBTOTLCN_)*(PAKNEGDIKSTKKN(-1)**(1-PAKNYYWBTOTLCN_-0.1))*(PAKNVENGTOTLKN**0.1) $
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="drawing-conclusions-about-the-instability-in-the-model">
<h1><span class="section-number">2. </span>Drawing conclusions about the instability in the model<a class="headerlink" href="#drawing-conclusions-about-the-instability-in-the-model" title="Permalink to this headline">#</a></h1>
<p>Interestingly the returned variables include four variables surrounding the government accounts.  Indicating that left to its own devices the equations for government spending could send the model into an unstable state.   While from a technical solution of a system of differential equations  point of view this might be worrisome, from an economic point of view this is actually a desirable feature.</p>
<p>It indicates that in the absence of a fiscal rule to constrain spending or to ensure revenues expand, it is possible for the government debt to grow in an unstable manner, causing model instability.</p>
<p>The economic translation of that condition is that there is nothing in the estimated behaviour of government spending and revenues to prevent a debt crisis from emerging. And indeed, Pakistan is a country that has found itself in debt distress in several instances, so this model “instability” would appear to reflect a real instability in the economy and as such may be a desirable feature.  Elimination (which is to say exogenization of government expenditure or the debt accumulation equation would be sufficient to eliminate the risk of instability.</p>
<p>The other unconstrained variables are the price variables.  Again this is not a problem for economic theory, which advises that the rate of inflation should stabilize but says nothing about the price level which in MFMod and in most countries is indeterminate.</p>
<p>Economic theory tells us that inflation should stabilize over time, but the price level at which it stabilizes can be (and usually is) constantly rising – exponentially in some countries but not most.</p>
<p>The other nexus of potentially unstable variables pertain to the level of GDP, which is also not bound except by potential output in the Pakistan model, a factor that is not in itself a problem as long as the price mechanisms work to close the output gap.</p>
<p>What about private investment??</p>
<p>‘PAKNEGDIFPRVKN Prvt. Investment real’ ‘PAKNEGDIFTOTKN Investment real’
‘PAKNEGDIFTOTKN2’ ‘PAKNEGDIKSTKKN Capital stock, LCU’</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\07_MoreFeatures"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../06_ModelAnalytics/AttributionSomeFeatures.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Analyzing the impact of a shock</p>
      </div>
    </a>
    <a class="right-next"
       href="GettingHelp.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Getting Help</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">1. Model eigenvalues</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-modelnewton">1.1. Import modelnewton</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-a-model-data-and-descriptions">1.2. Load a model, data and descriptions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-method-newton-diff">1.3. the method .newton_diff()</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-eigenvalues-method">1.3.1. .get_eigenvalues method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-eigenplot-all-method">1.3.2. .get_eigenplot_all method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#isolating-potentially-problematic-eigenvalues">1.3.3. Isolating potentially problematic eigenvalues</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-all-years">1.3.4. Look at all years</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dealing-with-potential-instability">1.4. Dealing with potential instability</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-get-eigen-jackknife-df-method">1.4.1. The <code class="docutils literal notranslate"><span class="pre">.get_eigen_jackknife_df()</span></code> method</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#look-at-only-2-years">1.4.2. Look at only 2 years</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-structure-of-jackdf">1.4.3. The structure of jackdf</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examining-the-results-of-the-grid-search">1.5. Examining the results of the grid search</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-query-to-indicate-which-equations-when-deleted-have-unstable-eigenvalues">1.6. A query to indicate which equations, when deleted have unstable eigenvalues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identifying-potentially-troublesome-equations">1.7. Identifying potentially troublesome equations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-the-eviews-equations-for-the-equations">1.8. Show the EViews equations for the equations.</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#show-the-modelflow-equations">1.9. Show the modelflow equations.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drawing-conclusions-about-the-instability-in-the-model">2. Drawing conclusions about the instability in the model</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Andrew Burns and Ib Hansen
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright World Bank. 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>